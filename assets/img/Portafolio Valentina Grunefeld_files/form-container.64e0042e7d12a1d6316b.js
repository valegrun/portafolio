(window.webpackJsonp_name_=window.webpackJsonp_name_||[]).push([[4],{570:function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"c",function(){return i}),n.d(t,"a",function(){return a});var o={AD:"376",AE:"971",AF:"93",AG:"1",AI:"1",AL:"355",AM:"374",AO:"244",AR:"54",AT:"43",AU:"61",AW:"297",AX:"358",AZ:"994",BA:"387",BB:"1",BD:"880",BE:"32",BF:"226",BG:"359",BH:"973",BI:"257",BJ:"229",BM:"1",BN:"673",BO:"591",BR:"55",BS:"1",BT:"975",BW:"267",BY:"375",BZ:"501",CA:"1",CD:"243",CF:"236",CG:"242",CH:"41",CI:"225",CL:"56",CM:"237",CN:"86",CO:"57",CR:"506",CU:"53",CV:"238",CY:"357",CZ:"420",DE:"49",DJ:"253",DK:"45",DM:"1",DO:"1",DZ:"213",EC:"593",EE:"372",EG:"20",ER:"291",ES:"34",ET:"251",FI:"358",FJ:"679",FK:"500",FM:"691",FO:"298",FR:"33",GA:"241",GB:"44",GD:"1",GE:"995",GG:"44",GH:"233",GI:"350",GM:"220",GN:"224",GQ:"240",GR:"30",GT:"502",GW:"245",GY:"592",HK:"852",HN:"504",HR:"385",HT:"509",HU:"36",ID:"62",IE:"353",IL:"972",IM:"44",IN:"91",IQ:"964",IR:"98",IS:"354",IT:"39",JE:"44",JM:"1",JO:"962",JP:"81",KE:"254",KG:"996",KH:"855",KM:"269",KN:"1",KP:"850",KR:"82",KW:"965",KY:"1",KZ:"7",LA:"856",LB:"961",LC:"1",LI:"423",LK:"94",LR:"231",LS:"266",LT:"370",LU:"352",LV:"371",LY:"218",MA:"212",MC:"377",MD:"373",ME:"382",MG:"261",MK:"389",ML:"223",MM:"95",MN:"976",MO:"853",MR:"222",MS:"1",MT:"356",MU:"230",MV:"960",MW:"265",MX:"52",MY:"60",MZ:"258",NA:"264",NE:"227",NG:"234",NI:"505",NL:"31",NO:"47",NP:"977",NZ:"64",OM:"968",PA:"507",PE:"51",PF:"689",PG:"675",PH:"63",PK:"92",PL:"48",PR:"1",PS:"970",PT:"351",PW:"680",PY:"595",QA:"974",RE:"262",RO:"40",RS:"381",RU:"7",RW:"250",SA:"966",SB:"677",SC:"248",SD:"249",SE:"46",SG:"65",SH:"290",SI:"386",SK:"421",SL:"232",SM:"378",SN:"221",SO:"252",SR:"597",ST:"239",SV:"503",SY:"963",SZ:"268",TC:"1",TD:"235",TG:"228",TH:"66",TJ:"992",TL:"670",TM:"993",TN:"216",TO:"676",TR:"90",TT:"1",TW:"886",TZ:"255",UA:"380",UG:"256",US:"1",UY:"598",UZ:"998",VC:"1",VE:"58",VG:"1",VN:"84",VU:"678",WS:"685",YE:"967",ZA:"27",ZM:"260",ZW:"263"},r=function(e){return o[e]||""},i=function(e,t){return t.replace("+".concat(r(e)),"")},a=function(){return Object.keys(o)}},669:function(e,t){e.exports=function(e){var t=e.node;return{setSelection:function(e,n){if(void 0===n&&"number"==typeof e?n=e:void 0===n&&(n=e.end,e=e.start),void 0!==t.selectionStart)t.selectionStart=e,t.selectionEnd=n;else{var o=t.createTextRange();o.collapse(!0),o.moveStart("character",e),o.moveEnd("character",n-e),o.select()}},getSelection:function(){var e,n;if(void 0!==t.selectionStart)e=t.selectionStart,n=t.selectionEnd;else{var o=document.selection.createRange();null==o&&(e=n=0);var r=t.createTextRange(),i=r.duplicate();r.moveToBookmark(o.getBookmark()),i.setEndPoint("EndToEnd",r),n=i.text.length,i.setEndPoint("EndToStart",r),e=i.text.length}return{start:e,end:n}}}}},670:function(e,t,n){var o=n(669);e.exports=function(e){var t=[40,37,39,38,32,8,13,46,9],n=[48,49,50,51,52,53,54,55,56,57],r=[96,97,98,99,100,101,102,103,104,105],i=!e;return function(e,a,s,l,c,u){if(s=function(e){return" "+e+" "}(s||"-"),a=a||"YYYYMMDD",c=c||!1,!e)return!1;var h="",p=[0,0,0],d=e,f=d.value,m={d:-1,m:-1,y:-1},b=s.length,v="DD".length+b+"MM".length+b+"YYYY".length,g=[],y="",k=function(e,t,n,o){var r=e.addEventListener?"addEventListener":"attachEvent";e[r]("attachEvent"===r?"on".concat(t):t,n,o)},C=function(e,t,n){n=n||h;var o=f.split(s),r=o[m[n]],i=parseInt(r,10),a=(new Date).toISOString();if("reset"===e)switch(n){case"d":r=l.substring(g[m.d][0],g[m.d][1]);break;case"m":r=l.substring(g[m.m][0],g[m.m][1]);break;case"y":r=l.substring(g[m.y][0],g[m.y][1])}else if("overwrite"===e&&"number"==typeof t){if("y"===n){var c=/[^0-9]/g;c.test(r)&&(r=r.replace(c,"0")),r=r.substr(1,3)+t}else 0===i&&0===t?r="01":0===p[m[n]]&&t>=0<=3?r=t:"d"===n&&i<=3||"m"===n&&i<=1?(r=r.charAt(1),("d"===n&&3===i&&t>1||"m"===n&&1===i&&t>2)&&(t="d"===n?1:2),r+=t.toString()):r=t;p[m[n]]++}else if("number"==typeof t&&isNaN(i))switch(n){case"d":r=parseInt(a.substring(8,10),10);break;case"m":r=parseInt(a.substring(5,7),10);break;case"y":r=parseInt(a.substring(0,4),10)}else{if("number"!=typeof t)return;r=i+t,("d"===n&&32===r||"m"===n&&13===r)&&(r=1),"d"===n&&0===r&&(r=31),"m"===n&&0===r&&(r=12)}((r=r.toString()).length<2||"y"===n&&r.length<4)&&(r=j(r)+r),o[m[n]]=r,H(I(o[0],o[1],o[2])),P(0)},w=function(){var e=void 0!==d.selectionStart?d.selectionStart:function(e){e.focus();var t=document.selection.createRange(),n=document.selection.createRange().text.length;return t.moveStart("character",-e.value.length),t.text.length-n}(d),t=O(),n=x(t);L(e>t&&e<=t+"MM".length+b?[t+b,t+"MM".length+b]:e>=n&&e<v?[n,v]:[0,t])},S=function(){var e="",t="";return A()?(t=I(a.substr(0,4),a.substr(4,2),a.substr(6,2)),e=I(l.substr(0,4),l.substr(5,2),l.substr(8,2))):(t=I(a.substr(0,2),a.substr(2,2),a.substr(4,4)),e=I(l.substr(0,2),l.substr(3,2),l.substr(6,4))),y=t,l=e},x=function(e){return v-(6-e)},E=function(e,t){e=e||!1,t=t||h;var n=f.split(s)[m[t]];return"default"===e?"DD"===n||"MM"===n||"YYYY"===n:n},O=function(){return A()?"YYYY".length:"DD".length},R=function(){var e;if(c)e=f;else{var t=f.split(s),n=t[m.y],o=t[m.m],r=t[m.d];e="".concat(n,"-").concat(o,"-").concat(r)}return e},A=function(){return"Y"===a.charAt(0)},I=function(e,t,n){return e+s+t+s+n},T=function(e){e.preventDefault();var o=e.keyCode,a=String.fromCharCode(o);if(t.indexOf(o)<0&&n.indexOf(o)<0&&r.indexOf(o)<0)return!1;switch(r.indexOf(o)>-1&&(o-=48,a=String.fromCharCode(o)),e.preventDefault?e.preventDefault():9===o&&(e.shiftKey&&0===m[h]||2===m[h])||(e.returnValue=!1),!0){case 38===o:C("inc",1);break;case 40===o:C("inc",-1);break;case 37===o:case 9===o&&e.shiftKey:P(-1,e);break;case 39===o:case 13===o:case 9===o:case 32===o:P(1,e);break;case 46===o:case 8===o:E("default")?P(-1):(C("reset",0),D());break;default:isNaN(parseInt(a,10))||(C("overwrite",parseInt(a,10)),i&&function(){var e=parseInt(E(),10);("d"===h&&e>3||"m"===h&&e>1||2===p[m[h]]&&"y"!==h||4===p[m[h]])&&P(1)}())}return!0},F=function(e){u(e.target.value)},j=function(e){var t="y"===h?"0000":"00";return t.substr(0,t.length-e.length)},D=function(e){p[m[e=e||h]]=0},B=function(){var e=["02","04","06","09","11"],t=parseInt(E(!1,"y"),10),n=E(!1,"m"),o=parseInt(E(!1,"d"),10),r=!isNaN(t)&&function(e){return 1===new Date(e,1,29).getMonth()}(t);isNaN(o)||e.indexOf(n)<0||o<29||("02"===n?o=r?29:28:o>30&&(o=30),C("overwrite",o,"d"),D("d"))},N=function(e){var t=new RegExp(" ","g");return e.replace(t,"")},P=function(e,t){var n=""!==h?m[h]+e:0+e;0!==e&&("0000"!==E()&&"00"!==E()||(C("reset"),C("overwrite",1)),D(),B()),i||2!==p[m[h]]||(p[m[h]]=0),n<0?n=0:n>2?n=2:t&&t.stopPropagation&&t.stopPropagation(),L(n)},L=function(e){var t;if(!Array.isArray(e)&&"number"!=typeof e)return console.error("invalid set to focus"),!1;t=Array.isArray(e)?e:g[e],h=y.substring(t[0],t[0]+1).toLowerCase(),d.setSelectionRange?d.setSelectionRange(t[0],t[1]):function(e,t,n){var r=o({node:e});r.setSelection(0),r.setSelection(t,n),r.setSelection({start:t,end:n}),r.getSelection()}(d,t[0],t[1])},H=function(e){e=e||S(),f=d.value=e;var t=R();u(t,function(e){return new Date(e).getTime()}(t))};return{focus:function(){c||(e.focus(),L([0,O()]))},blur:function(){c||e.blur()},destroy:function(){c?d.removeEventListener("change",F,!0):(d.removeEventListener("click",w,!0),d.removeEventListener("keydown",T,!0))},render:function(){return 8===a.length&&(function(){var e=s.length,t=O(),n=t+e,o=n+"MM".length,r=x(t);A()?(m.y=0,m.m=1,m.d=2):("M"===a.charAt(0)?(m.m=0,m.d=1):(m.d=0,m.m=1),m.y=2),g.push([0,t]),g.push([n,o]),g.push([r,v])}(),c?(d.setAttribute("min","0001-01-01"),d.setAttribute("max","9999-12-31"),d.setAttribute("data-placeholder",S()),k(d,"change",F,!0)):(d.setAttribute("onCut","return false;"),d.setAttribute("onPaste","return false;"),k(d,"click",w,!0),k(d,"keydown",T,!0)),H(),this)},value:function(e){return e?R():N(f)},setValue:H,test:{_keyBehaviour:T,_setFocusOnSubfield:P}}}}},711:function(e,t,n){"use strict";n.r(t);var o=n(41),r=n(50),i=n(25),a=n.n(i),s=n(24),l=n.n(s),c=n(32),u=n.n(c),h=n(31),p=n.n(h),d=n(20),f=n.n(d),m=n(30),b=n.n(m),v=n(10),g=n.n(v),y=n(18),k=n.n(y),C=n(1),w=n.n(C),S=n(11),x=n(0),E=n.n(x),O=n(197),R=n(3),A=n.n(R),I=n(560),T=n.n(I),F=n(115),j=n.n(F),D=n(69),B=n.n(D),N=n(691),P=n.n(N),L=n(101),H=n.n(L),V=n(60),M=n.n(V),z=n(34),K=n(91),_=n(183),U=n.n(_),W=n(185),Y=n.n(W),G=n(563),q=n.n(G),X=n(8);function Q(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.footerHeight,o=void 0===n?0:n,r=t.boundingClientRect,i=void 0===r?{}:r,a=t.onlyTop,s=void 0!==a&&a,l=t.offsetTop,c=void 0===l?0:l,u=t.offsetBottom,h=void 0===u?0:u;if(!e)return!1;var p=e.getBoundingClientRect(),d=i.height||window.innerHeight||document.documentElement.clientHeight,f=i.top||0,m=p.top>=f+c,b=p.bottom<=d-o-h;return s?m:m&&b}var Z=n(33),J=n(53);function $(){var e=k()(["\n  position: absolute;\n  -webkit-font-smoothing: antialiased;\n"]);return $=function(){return e},e}var ee=S.default.div($()),te=function(e){function t(e){var n;return a()(this,t),(n=u()(this,p()(t).call(this,e))).state={inViewport:!0},n.handleOutOfView=n.handleOutOfView.bind(f()(n)),n.getInnerRef=n.getInnerRef.bind(f()(n)),n}return b()(t,e),l()(t,[{key:"handleOutOfView",value:function(){if(this.props.useStickyFooter){var e=Q(this.buttonNode,this.props.layoutItemsSize);this.setState({inViewport:e})}}},{key:"componentDidMount",value:function(){var e=this;this.props.handleAppScroll(function(){e.props.isVisible&&e.handleOutOfView()})}},{key:"componentWillReceiveProps",value:function(e){this.props.isVisible!==e.isVisible&&this.handleOutOfView()}},{key:"componentWillUpdate",value:function(e,t){var n=!t.inViewport&&e.isVisible,o=!e.isVisible||t.inViewport;n?this.props.onRequireStickyFooter(this.props.blockRef):o&&this.props.onRequireStickyFooter(null)}},{key:"getInnerRef",value:function(e){this.buttonNode=e}},{key:"render",value:function(){var e=this.props,t=e.backgroundColor,n=e.buttonColor,o=e.helperColor,r=e.helperText,i=e.hideIcon,a=e.label,s=e.isAnimated,l=e.onClick,c=e.isVisible,u=e.t,h=w.a.createElement(ee,{innerRef:this.getInnerRef},w.a.createElement(Y.a,{size:"medium",content:Object(Z.a)(u(a)),color:n,contextBackgroundColor:t,helperText:!Object(X.isTouch)()&&Object(Z.a)(u(r)),helperColor:o,onClick:l,iconSvg:i?null:q.a,dataQa:"ok-button".concat(c?"-visible":""," deep-purple-ok-button").concat(c?"-visible":"")}));return s?w.a.createElement(U.a,{type:"slideUp",isVisible:c&&this.state.inViewport,delay:0,duration:100},h):h}}]),t}(C.Component);te.defaultProps={backgroundColor:X.__OVERRIDE_THIS_COLOR,buttonColor:X.__OVERRIDE_THIS_COLOR,handleAppScroll:function(){},helperColor:X.__OVERRIDE_THIS_COLOR,helperText:"label.buttonHint.default",hideIcon:!1,includedInFlow:!1,isAnimated:!0,isVisible:!1,label:"label.button.ok",onRequireStickyFooter:function(){},t:function(e){return e}},te.propTypes={backgroundColor:E.a.string,blockRef:E.a.string,buttonColor:E.a.string,className:E.a.string,handleAppScroll:E.a.func,helperColor:E.a.string,helperText:E.a.string,hideIcon:E.a.bool,isAnimated:E.a.bool,isVisible:E.a.bool,includedInFlow:E.a.bool,label:E.a.string,layoutItemsSize:E.a.object,onClick:E.a.func,onRequireStickyFooter:E.a.func,useStickyFooter:E.a.bool,t:E.a.func};var ne=Object(J.a)(te),oe=n(273);function re(e,t){return Object(oe.onAction)(e).bind(null,t)}var ie=n(2),ae=Object(o.b)(function(e){return{buttonColor:Object(K.c)(e).button,helperColor:Object(K.c)(e).primary,backgroundColor:Object(K.c)(e).background}},function(e){return A()({},Object(r.b)({onRequireStickyFooter:z.p},e),{handleAppScroll:re(e,ie.d)})})(ne),se=n(684),le=n.n(se),ce=n(186),ue=n(144),he=n.n(ue),pe=n(578),de=n.n(pe),fe=n(143),me=n.n(fe);var be=n(90),ve=n(74),ge="bottom",ye=n(36),ke=n(89);function Ce(){var e=k()(["\n  position: absolute;\n  border-top: 1px dashed red;\n  height: 0;\n  width: 100%;\n  left: 0;\n  top: ","px;\n"]);return Ce=function(){return e},e}function we(){var e=k()(["\n  position: relative;\n  overflow-y: scroll;\n  overflow-x: hidden;\n  -webkit-overflow-scrolling: touch;\n  z-index: 1;\n  height: 100%;\n\n  // pad the blocks with 50% parent height top and bottom.\n  &::before {\n    content: '';\n    display: block;\n    width: 100%;\n    height: calc(50% - ","px);\n  }\n\n  ",";\n  ",";\n  ",";\n"]);return we=function(){return e},e}function Se(){var e=k()(["\n  height: calc(100% - ","px);\n"]);return Se=function(){return e},e}var xe=75;function Ee(e,t,n){var o=function(e,t){var n=t.getBoundingClientRect(),o=e.getBoundingClientRect(),r={left:n.left-o.left,top:n.top-o.top};return r.right=r.left+n.width,r.bottom=r.top+n.height,r}(e,t),r=o.top,i=o.bottom,a=Math.max(0,r-n),s=Math.max(0,n-i);return{max:Math.max(a,s),top:a,bottom:s}}var Oe=S.default.div(Se(),function(e){return e.footerHeight}),Re=S.default.div(we(),function(e){return e.footerHeight},function(e){return e.preventScroll?"overflow: hidden;":""},function(e){return e.preventScroll?"padding-right: ".concat(e.scrollbarWidth,"px;"):""},function(e){return e.debug?"section { box-shadow: inset red 0 0 0 1px; }":""}),Ae=(S.default.div(Ce(),function(e){return e.position}),function(e){function t(e){var n;return a()(this,t),(n=u()(this,p()(t).call(this,e))).handleScroll=n.handleScroll.bind(f()(n)),n.handleBlockActivation=me()(n.handleBlockActivation,xe).bind(f()(n)),n.handleKeyDown=n.handleKeyDown.bind(f()(n)),n.scrollbarWidth=null,n.blocksNodes=null,n.activateCenteredBlock=n.activateCenteredBlock.bind(f()(n)),n.updateBlocksNodes=n.updateBlocksNodes.bind(f()(n)),n.nodeDistanceToCenter=n.nodeDistanceToCenter.bind(f()(n)),n.isNodeCentered=n.isNodeCentered.bind(f()(n)),n.handleScrollingChange=n.handleScrollingChange.bind(f()(n)),n.disableActivation=!1,n}return b()(t,e),l()(t,[{key:"getFocusLine",value:function(e){return e/2}},{key:"calculateBlockScrollTop",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"center",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"center",r=this.findNodeByRef(e);if(t&&r){var i=this.props.blocks.find(function(t){return t.ref===e}),a=this.props.blocks.findIndex(function(t){return t.ref===e}),s=t.clientHeight;if(s<10)return 0;var l,c=this.getFocusLine(s),u=r.offsetTop,h=r.clientHeight,p=0;if(i.childOfGroup){p=this.props.layoutItemsSize.groupHeaderHeight;var d=this.props.blocks[a-1];if(!d.childOfGroup&&!d.showButton){var f=this.findNodeByRef(d.ref);u=f.offsetTop,h+=f.clientHeight,p=0}}var m=0;if("center"===n){var b=h/2;m=h>s-p-48?b:b-48+Le,l=u-p}else n===ge&&(m=h-Le-48);var v,g=u+m;return"center"===o?v=g-c:o===ge&&(v=g-s),l?Math.min(v,l):v}}},{key:"calculateChoiceScrollTop",value:function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:160,r=e.top,i=e.height;return r<o?n-(o-r):r+i>t-o?n+r+i-(t-o):void 0}},{key:"scrollToRef",value:function(e,t,n,o){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];switch(t){case ve.c:this.scrollToBlock(this.props.currentRef,n,o,r);break;case ve.a:if(e!==this.props.currentRef){this.delayedScrollToBlock(e,n,o,r);break}this.scrollToBlock(e,n,o,r);break;case ve.b:this.scrollToChoice(this.findNodeByRef(e))}}},{key:"scrollToUnfixedFooter",value:function(){var e=this.scrollerNode,t=e.scrollHeight-e.clientHeight;this.scrollTo(e,t,!1),this.activateBlock(ye.b)}},{key:"delayedScrollToBlock",value:function(e,t,n,o){var r=this;setTimeout(function(){return r.scrollToBlock(e,t,n,o)},0)}},{key:"scrollToBlock",value:function(e,t,n,o){var r=this.scrollerNode,i=this.calculateBlockScrollTop(e,r,t,n);null!=i&&(this.activateBlock(e),this.scrollTo(r,i,o))}},{key:"scrollToChoice",value:function(e){var t=this.scrollerNode;if(e&&t){var n=e.getBoundingClientRect(),o=t.scrollTop,r=t.clientHeight,i=this.calculateChoiceScrollTop(n,r,o);i&&this.scrollTo(t,i,!1)}}},{key:"scrollTo",value:function(e,t,n){var o=this;Math.abs(e.scrollTop-t)<5?this.endAutoScroll():(this.finishedScrollAt=t,this.endScrollingFailsafeTimeout=setTimeout(function(){o.props.scrolling&&o.endAutoScroll()},3e3),n?e.scrollTop=t:e.scroll&&"scrollBehavior"in document.documentElement.style?e.scroll({top:t,behavior:"smooth"}):de()(e,"scrollTop",t,200,"easeOutCubic"))}},{key:"endAutoScroll",value:function(){this.props.scrolling&&(clearTimeout(this.endScrollingFailsafeTimeout),this.finishedScrollAt=null,this.props.onEndAutoScroll(),this.activateCenteredBlock())}},{key:"getBlockNodeByRef",value:function(e){return document.getElementById("block-".concat(e))}},{key:"getChoiceNodeByRef",value:function(e){return document.getElementById("choice-".concat(e))}},{key:"updateBlocksNodes",value:function(){this.blocksNodes=this.scrollerNode&&Array.prototype.slice.call(this.scrollerNode.querySelectorAll("[data-js-activable-item]"))}},{key:"getOwnHeight",value:function(){return this.scrollerNode?this.scrollerNode.clientHeight:0}},{key:"nodeDistanceToCenter",value:function(e){return Ee(he.a.findDOMNode(this),e,this.getFocusLine(this.getOwnHeight()))}},{key:"isNodeCentered",value:function(e){return function(e,t,n){return 0===Ee(e,t,n).max}(he.a.findDOMNode(this),e,this.getFocusLine(this.getOwnHeight()))}},{key:"activateCenteredBlock",value:function(){if(0!==this.blocksNodes.length){var e=this.blocksNodes.findIndex(this.isNodeCentered),t=this.props.blocks[e];if(!t)if(this.nodeDistanceToCenter(this.blocksNodes[this.blocksNodes.length-1]).bottom>30)return void this.activateBlock(ye.b);t&&t.ref!==this.activeBlockRef&&this.activateBlock(t.ref)}}},{key:"activateBlock",value:function(e){var t=this.props.blocks.find(function(t){return t.ref===e}),n=e;if(t&&t.activateFirstChild){var o=this.props.blocks.findIndex(function(t){return t.ref===e}),r=this.props.blocks[o+1];r&&(n=r.ref)}this.activeBlockRef=n,this.props.onActivate(n)}},{key:"handleBlockActivation",value:function(){null==this.props.scrolling&&(this.disableActivation||this.activateCenteredBlock())}},{key:"handleScroll",value:function(e){e.target===this.scrollerNode&&(this.handleBlockActivation(),this.props.onScroll(),null!=this.finishedScrollAt&&Math.abs(this.finishedScrollAt-e.target.scrollTop)<5&&this.endAutoScroll())}},{key:"handleKeyDown",value:function(e){var t=e.keyCode===ke.a.ARUP||e.keyCode===ke.a.TAB&&e.shiftKey,n=e.keyCode===ke.a.ARDOWN||e.keyCode===ke.a.TAB;t?(this.props.onGoToPreviousBlock(),e.preventDefault()):n&&(this.props.onGoToNextBlock(),e.preventDefault())}},{key:"componentDidMount",value:function(){this.updateBlocksNodes(),null===this.scrollbarWidth&&(this.scrollbarWidth=function(){var e=document.createElement("div");e.style.width="100px",e.style.height="100px",e.style.overflow="scroll",e.style.position="absolute",e.style.top="-9999px",document.body.appendChild(e);var t=e.offsetWidth-e.clientWidth;return document.body.removeChild(e),t}()),this.delayedScrollToBlock(this.props.currentRef,"center","center",!0)}},{key:"findNodeByRef",value:function(e){var t=this.getBlockNodeByRef(e);return null!=t?t:null!=(t=this.getChoiceNodeByRef(e))?t:void 0}},{key:"handleScrollingChange",value:function(){var e=this.props.scrolling,t=e.ref,n=e.scrollType,o=e.anchor,r=e.target,i=e.fast;this.activeBlockRef===t&&this.props.onActivate(t),t!==ye.b?this.scrollToRef(t,n,o,r,i):this.scrollToUnfixedFooter()}},{key:"componentDidUpdate",value:function(e){e.blocks!==this.props.blocks&&this.updateBlocksNodes(),this.props.scrolling&&this.props.scrolling!==e.scrolling&&this.handleScrollingChange();var t=e.isInputFocused,n=this.props.isInputFocused;Object(be.a)()&&t!==n&&this.disableActivationTemporarily(300)}},{key:"disableActivationTemporarily",value:function(e){var t=this;this.disableActivation=!0,setTimeout(function(){t.disableActivation=!1,t.activateCenteredBlock()},e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.preventFormScroll,o=t.layoutItemsSize,r=t.children;return w.a.createElement(Oe,{footerHeight:o.footerHeight},!1,w.a.createElement(Re,{preventScroll:n,debug:!1,scrollbarWidth:this.scrollbarWidth,footerHeight:o.footerHeight,onScroll:this.handleScroll,onKeyDown:this.handleKeyDown,innerRef:function(t){e.scrollerNode=t}},r))}}]),t}(C.Component));Ae.defaultProps={preventFormScroll:!1,layoutItemsSize:{}},Ae.propTypes={currentRef:E.a.string,scrolling:E.a.object,layoutItemsSize:E.a.object,blocks:E.a.array,preventFormScroll:E.a.bool,children:E.a.node.isRequired,onActivate:E.a.func,onScroll:E.a.func,onGoToNextBlock:E.a.func,onGoToPreviousBlock:E.a.func,onEndAutoScroll:E.a.func,hasHiddenFields:E.a.bool,isInputFocused:E.a.bool};var Ie=Ae,Te=n(562),Fe=n.n(Te),je=n(19);function De(){var e=k()(["\n  width: 100%;\n  opacity: ",";\n  z-index: ",";\n  position: relative;\n  animation: ",";\n  ",";\n\n  @media print {\n    page-break-inside: avoid;\n    opacity: 1;\n  }\n"]);return De=function(){return e},e}function Be(){var e=k()(["\n  ",";\n"]);return Be=function(){return e},e}function Ne(){var e=k()(["\n  padding-top: ","px;\n  padding-bottom: ","px;\n\n  ",";\n"]);return Ne=function(){return e},e}function Pe(){var e=k()(["\n  20% {\n    transform: translateX(3px);\n  }\n\n  80% {\n    transform: translateX(-3px);\n  }\n"]);return Pe=function(){return e},e}var Le=24,He=Object(S.keyframes)(Pe()),Ve=S.default.div(Ne(),Le,Le,""),Me=S.default.div(Be(),function(e){return e.disabled?"pointer-events: none; user-select: none;":""}),ze=S.default.section(De(),function(e){return e.isActive?1:.2},function(e){return e.isActive?je.zLevels.level1:je.zLevels.level0},function(e){return e.isShaking?"".concat(He," 0.15s cubic-bezier(0.36, 0.07, 0.19, 0.97) both infinite"):"none"},function(e){return e.isVisible?"":"visibility: hidden;"}),Ke=function(e){var t=e.blockRef,n=e.isActive,o=e.isShaking,r=e.isVisible,i=e.onClick,a=e.children,s=e.dataQa,l=e.innerRef;return w.a.createElement(ze,B()({id:"block-".concat(t),isActive:n,isShaking:o,isVisible:r,onClick:i,"data-js-activable-item":!0},n&&{"data-qa-focused":!0},{"data-qa-blockRef":t,"data-qa-block":!0,"data-qa":s,innerRef:l}),w.a.createElement(Me,{disabled:!n},w.a.createElement(Fe.a,null,w.a.createElement(Ve,null,a))))};Ke.propTypes={className:E.a.string,blockRef:E.a.string,isAnswered:E.a.bool,isActive:E.a.bool,isShaking:E.a.bool,isVisible:E.a.bool,children:E.a.any,onClick:E.a.func,dataQa:E.a.string};var _e=Ke;function Ue(){var e=k()(["\n  border: 0;\n  padding: 0.01em 0 0;\n  margin: 0;\n  min-width: 0;\n"]);return Ue=function(){return e},e}var We=S.default.fieldset(Ue());We.displayName="fieldset";var Ye=function(e){var t=e.children,n=e.isFieldset?We:C.Fragment;return w.a.createElement(n,null,t)};Ye.propTypes={children:E.a.any,isFieldset:E.a.bool};var Ge=Ye,qe=n(142),Xe=n.n(qe);function Qe(){var e=k()(["\n  width: 1px;\n  height: 1px;\n  overflow: hidden;\n  display: block;\n"]);return Qe=function(){return e},e}var Ze=S.default.legend(Qe()),Je=function(e){var t=e.children,n=e.id,o=e.htmlTag;return"legend"===o?w.a.createElement("span",null,w.a.createElement(Ze,null,t),w.a.createElement("span",{"data-qa":"block-title deep-purple-block-title"},t)):w.a.createElement(Xe.a,{type:"title",htmlTag:o,htmlFor:n,"data-qa":"block-title deep-purple-block-title"},t)};Je.defaultProps={htmlTag:"span"},Je.propTypes={children:E.a.any,htmlTag:E.a.string,id:E.a.string};var $e=Je;function et(){var e=k()(["\n  pointer-events: none;\n  border-radius: 3px;\n  position: absolute;\n  padding: 4px 8px;\n  background-color: rgba(153, 0, 0, 0.6);\n  color: #fff;\n"]);return et=function(){return e},e}var tt=S.default.div(et()),nt=function(e){var t=e.id,n=e.visible,o=e.validations,r=e.t;return null==t?null:w.a.createElement(U.a,{isVisible:n,type:"slideUp",duration:300},w.a.createElement(tt,null,w.a.createElement(H.a,{size:"sizeN1",color:"#FFFFFF",dataQa:"error-message".concat(n?"-visible":""),useDefaultFont:!0},Object(Z.a)(r(t,function(e,t){switch(e){case"label.error.minValue":return{min_value:t.minValue.minValue-1};case"label.error.maxValue":return{max_value:t.maxValue.maxValue+1};case"label.error.range":return{max_value:t.range.maxValue,min_value:t.range.minValue}}return{}}(t,o))))))};nt.defaultProps={visible:!1,id:"label.error.required",t:function(e){return e}},nt.propTypes={id:E.a.string,visible:E.a.bool,validations:E.a.object,t:E.a.func};var ot=Object(J.a)(nt),rt=n(187),it=n(7),at=n(577),st=n.n(at);function lt(){var e=k()(["\n  box-sizing: border-box;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  margin-top: 32px;\n"]);return lt=function(){return e},e}function ct(){var e=k()(["\n  height: ","px;\n  ",";\n"]);return ct=function(){return e},e}var ut=200,ht=S.default.div(ct(),48,""),pt=S.default.div(lt()),dt=function(e){function t(e){var n;return a()(this,t),(n=u()(this,p()(t).call(this,e))).handleClick=n.handleClick.bind(f()(n)),n.handleAttachmentLoaded=n.handleAttachmentLoaded.bind(f()(n)),n.state={useStickyHeader:!1,maxAttachmentHeight:ut},n.calculatedAttachmentHeight=!1,n.initialAttachmentCentered=!1,n}return b()(t,e),l()(t,[{key:"componentDidMount",value:function(){var e=this;this.props.handleAppScroll(function(){e.props.isActive&&e.handleLongBlock()})}},{key:"componentWillReceiveProps",value:function(e){this.props.isActive&&!e.isActive&&this.handleBlockDeactivated(e)}},{key:"calculateMaxImageHeight",value:function(){var e=ut;this.props.attachment&&this.blockNode&&this.thisNode&&this.attachmentRef&&this.props.layoutItemsSize.boundingClientRect.height&&this.props.layoutItemsSize.footerHeight&&(e=function(e,t,n,o,r){var i=0;e===it.a.multipleChoice&&(i=r-95);var a=t-(n-o-i);return Math.max(a,ut)}(this.props.type,this.props.layoutItemsSize.boundingClientRect.height-this.props.layoutItemsSize.footerHeight,this.thisNode.clientHeight,this.attachmentRef.clientHeight,this.blockNode.clientHeight),this.calculatedAttachmentHeight=!0,this.setState({maxAttachmentHeight:e}))}},{key:"componentWillUpdate",value:function(e,t){t.useStickyHeader!==this.state.useStickyHeader&&this.props.onRequireStickyHeader(t.useStickyHeader),this.calculatedAttachmentHeight||this.calculateMaxImageHeight()}},{key:"componentDidUpdate",value:function(e){this.props.isActive&&this.handleBlockCentering(e)}},{key:"handleBlockDeactivated",value:function(){this.setState({useStickyHeader:!1})}},{key:"handleBlockCentering",value:function(e){var t=this;["title","description","attachment"].some(function(n){return!le()(e[n],t.props[n])})&&this.props.recenter()}},{key:"handleLongBlock",value:function(){if(this.headerNode){var e=Q(this.headerNode,A()({},this.props.layoutItemsSize,{offsetTop:this.props.isVisibleGroupStickyHeader?this.props.layoutItemsSize.groupHeaderHeight-20:0,onlyTop:!0}));e!==this.headerIsInViewport&&(this.headerIsInViewPort=e,this.setState({useStickyHeader:!this.headerIsInViewPort}))}}},{key:"handleAttachmentLoaded",value:function(){this.props.isLivePreview&&(this.calculatedAttachmentHeight=!1),this.calculatedAttachmentHeight||this.calculateMaxImageHeight(),this.props.isFocused&&this.props.isLivePreview&&this.props.recenter(),this.props.isFirstBlock&&!this.initialAttachmentCentered&&(this.initialAttachmentCentered=!0,this.props.recenter())}},{key:"handleClick",value:function(){this.props.isActive||Object(be.a)()||this.props.scrollTo(this.props.blockRef)}},{key:"render",value:function(){var e=this,t=this.props,n=t.blockRef,o=t.attachment,r=t.children,i=t.childOfGroup,a=t.description,s=t.isAnswered,l=t.isActive,c=t.title,u=t.titleCounterIcon,h=t.listIndexText,p=t.theme,d=t.type,f=t.validations,m=t.isCommitted,b=t.isValid,v=t.hideError,g=t.validationError,y=t.isVisible,k=t.layoutItemsSize,C=t.isShaking,S=t.customError,x=t.useFieldset,E=t.t,O="string"==typeof c?c:c&&c.text;return w.a.createElement(_e,{isActive:l,isVisible:y,isAnswered:s,isShaking:l&&C,onClick:this.handleClick,blockRef:n,dataQa:"blocktype-".concat(d," deep-purple-blocktype-").concat(d),innerRef:function(t){e.thisNode=t}},w.a.createElement(Ge,{isFieldset:x},w.a.createElement("div",{ref:function(t){return e.headerNode=t}},w.a.createElement(st.a,{title:w.a.createElement($e,{id:c.for,htmlTag:c.type},Object(Z.a)(E(O),{allowHyperlinks:!0})),titleSize:"size2",required:f&&f.required,color:p.colors&&p.colors.primary,counterIcon:i&&h?null:u,counterColor:p.colors&&p.colors.secondary,counterContent:i&&h?"".concat(h,"."):h}),a&&w.a.createElement(M.a,{top:1},w.a.createElement(Xe.a,{type:"description",color:p.colors&&p.colors.primary,htmlTag:"p",dataQa:"block-description"},Object(Z.a)(E(a),{allowHyperlinks:!0})))),o&&w.a.createElement(pt,null,w.a.createElement(rt.a,B()({},o,k,{maxHeight:this.state.maxAttachmentHeight,attachmentRef:function(t){return e.attachmentRef=t},onLoaded:this.handleAttachmentLoaded,forcePause:!l,isVisible:l}))),w.a.createElement("div",{ref:function(t){return e.blockNode=t}},r,w.a.createElement(ot,{id:S||g,visible:(!!S||m&&!b)&&!v,validations:f}),w.a.createElement(ht,null))))}}]),t}(C.Component);dt.defaultProps={scrollTo:function(){},recenter:function(){},validations:{},layoutItemsSize:{footerHeight:0},t:function(e){return e},hideError:!1,titleCounterIcon:"arrow",useFieldset:!1,title:"",theme:{colors:{primary:X.__OVERRIDE_THIS_COLOR}},handleAppScroll:function(){}},dt.propTypes={children:E.a.any,childOfGroup:E.a.bool,description:E.a.string,attachment:E.a.shape({type:E.a.string,resource:E.a.shape({href:E.a.string})}),blockRef:E.a.string,isActive:E.a.bool,isAnswered:E.a.bool,scrollTo:E.a.func,recenter:E.a.func,type:E.a.string,validations:E.a.shape({required:E.a.bool,maxLength:E.a.number,range:E.a.shape({minValue:E.a.number,maxValue:E.a.number})}),isCommitted:E.a.bool,isValid:E.a.bool,hideError:E.a.bool,isVisible:E.a.bool,validationError:E.a.string,layoutItemsSize:E.a.shape({footerHeight:E.a.number,groupHeaderHeight:E.a.number}),isVisibleGroupStickyHeader:E.a.bool,handleAppScroll:E.a.func,onRequireStickyHeader:E.a.func,isShaking:E.a.bool,theme:E.a.object.isRequired,customError:E.a.string,title:E.a.oneOfType([E.a.string,E.a.shape({text:E.a.string,type:E.a.string,for:E.a.string})]).isRequired,titleCounterIcon:E.a.string,listIndexText:E.a.string,useFieldset:E.a.bool,t:E.a.func};var ft=Object(ce.a)(dt),mt=n(6),bt=Object(o.b)(function(e){return{isVisibleGroupStickyHeader:Object(mt.i)(e)}},function(e){return A()({},Object(r.b)({onRequireStickyHeader:z.q},e),{handleAppScroll:re(e,ie.d)})})(ft);function vt(e,t){return e.keyCode===ke.a.ARUP&&0!==t}function gt(e,t,n){return e.keyCode===ke.a.ARDOWN&&t!==n.value.length}function yt(e){return e.keyCode===ke.a.ENTER||e.which===ke.a.ENTER}var kt=function(e,t,n){return it.a.number!==e||function(e){return(e.ctrlKey||e.metaKey)&&("v"===e.key||"c"===e.key||"z"===e.key)}(n)||yt(n)||function(e){var t=e.which;return ke.a.NUM_0<=t&&t<=ke.a.NUM_9}(n)?e===it.a.shortText&&t.maxLength&&t.maxLength<=n.target.value.length?(n.preventDefault(),{blocked:!0}):e===it.a.longText&&t.maxLength&&t.maxLength<=n.target.value.length?(n.preventDefault(),{blocked:!0}):{blocked:!1}:(n.preventDefault(),{blocked:!0})},Ct=function(e,t){var n=function(e,t,n){var o=n&&n.selectionStart;return void 0!==o&&e.some(function(e){return e(t,o,n)})}([vt,gt,yt],t.nativeEvent,t.target);it.a.number===e&&function(e){return e.key===ke.a.DEAD||e.keyIdentifier===ke.a.UNIDENTIFIED}(t)&&t.preventDefault(),n&&t.stopPropagation()},wt=n(139),St=n(43),xt=function(e,t){return e.isActive||t.isActive||e.isCommitted!==t.isCommitted||e.layoutItemsSize!==t.layoutItemsSize},Et=function(e){function t(e){var n;return a()(this,t),(n=u()(this,p()(t).call(this,e))).handleCommit=n.handleCommit.bind(f()(n)),n.handleChange=n.handleChange.bind(f()(n)),n.handleKeyDown=n.handleKeyDown.bind(f()(n)),n.handleKeyPress=n.handleKeyPress.bind(f()(n)),n.handleFocus=n.handleFocus.bind(f()(n)),n.handleBlur=n.handleBlur.bind(f()(n)),n.handleResize=n.handleResize.bind(f()(n)),n.inputId="stkv-text-".concat(n.props.blockRef),n.state={isShaking:!1},n}return b()(t,e),l()(t,[{key:"shouldComponentUpdate",value:function(e){return xt(this.props,e)}},{key:"shake",value:function(){var e=this;this.setState({isShaking:!0}),clearTimeout(this.shakeStopTimeout),this.shakeStopTimeout=setTimeout(function(){return e.setState({isShaking:!1})},600)}},{key:"isInputFocused",value:function(){return!!document&&document.activeElement===this.textInput}},{key:"handleFocus",value:function(){var e=this;Object(be.a)()&&(this.props.onInputFocus(),Object(wt.a)()||setTimeout(function(){e.props.recenter(ge)},700))}},{key:"handleBlur",value:function(){this.props.onInputBlur()}},{key:"handleCommit",value:function(e){var t=this,n=this.isInputFocused()&&Object(be.a)();this.textInput&&n&&this.textInput.blur(),e.stopPropagation(),setTimeout(function(){t.props.isActive&&t.props.onCommitAnswer(t.props.blockRef)},n?700:0)}},{key:"handleChange",value:function(e){var t=e.target.value;this.props.onStageAnswer(this.props.blockRef,t.slice(0,this.props.maxLength))}},{key:"handleKeyPress",value:function(e){kt(this.props.type,this.props.validations,e).blocked&&this.shake()}},{key:"handleKeyDown",value:function(e){var t=this,n=!!e.shiftKey;Ct(this.props.type,e),Object(be.a)()||e.nativeEvent.keyCode!==ke.a.ENTER||n||(this.textInput&&this.textInput.blur(),e.stopPropagation(),setTimeout(function(){t.props.onCommitAnswer(t.props.blockRef)},Object(be.a)()?700:0))}},{key:"handleResize",value:function(e){if(this.handleChange(e),this.props.isActive&&!Object(wt.a)()){var t=ge;this.props.recenter(t,"center",!0)}}},{key:"updateInputFocus",value:function(e,t,n){this.props.canUpdateFocus&&(t?!Object(be.a)()&&Q(e,this.props.layoutItemsSize)&&e.focus():n&&e.blur())}},{key:"componentDidMount",value:function(){var e=this;this.updateInputFocus(this.textInput,this.props.isActive),this.props.handleAppScroll(function(){e.props.isActive&&e.updateInputFocus(e.textInput,e.props.isActive)})}},{key:"componentDidUpdate",value:function(e){this.updateInputFocus(this.textInput,this.props.isActive,e.isActive)}},{key:"render",value:function(){var e=this,t=this.props,n=t.isCommitButtonVisible,o=t.placeholder,r=t.title,i=t.validations,a=t.value,s=t.theme,l=t.t;return w.a.createElement(bt,B()({},this.props,{isShaking:this.state.isShaking,title:{text:r,for:this.inputId,type:"label"}}),w.a.createElement(M.a,{top:4,bottom:2},w.a.createElement(P.a,{placeholder:l(o),maxLength:i.maxLength,onChange:this.handleChange,onResize:this.handleResize,onKeyDown:this.handleKeyDown,onKeyPress:this.handleKeyPress,onFocus:this.handleFocus,onBlur:this.handleBlur,innerRef:function(t){e.textInput=t},id:this.inputId,value:a&&a[0],color:s.colors.secondary}),!Object(be.a)()&&w.a.createElement(M.a,{top:2},w.a.createElement(H.a,{color:s.colors.secondary,fontWeight:"regular",htmlTag:"p",size:"sizeN2"},Object(Z.a)(l("block.longText.hint"))))),w.a.createElement(ae,{blockRef:this.props.blockRef,onClick:this.handleCommit,isVisible:n,layoutItemsSize:this.props.layoutItemsSize,useStickyFooter:!0}))}}]),t}(C.Component);Et.defaultProps={onCommitAnswer:St.a,onStageAnswer:St.a,recenter:St.a,t:St.a,theme:{colors:{secondary:X.__OVERRIDE_THIS_COLOR}},validations:{maxLength:null},value:""},Et.propTypes={blockRef:E.a.string,handleAppScroll:E.a.func,index:E.a.number,isActive:E.a.bool,isCommitButtonVisible:E.a.bool,layoutItemsSize:E.a.shape({footerHeight:E.a.number}),onCommitAnswer:E.a.func,onStageAnswer:E.a.func,placeholder:E.a.string,recenter:E.a.func,t:E.a.func,title:E.a.string,type:E.a.string,validations:E.a.shape({maxLength:E.a.number}),value:E.a.oneOfType([E.a.arrayOf(E.a.any),E.a.string])};var Ot=Et,Rt=n(559),At=n.n(Rt),It=n(670),Tt=n.n(It),Ft=function(e){function t(){var e;return a()(this,t),(e=u()(this,p()(t).call(this))).handleFocus=e.handleFocus.bind(f()(e)),e.handleBlur=e.handleBlur.bind(f()(e)),e.handleRef=e.handleRef.bind(f()(e)),e.dateFieldFactory=Tt()(),e.dateFieldInstance=null,e}return b()(t,e),l()(t,[{key:"enhanceInputWithDateLogic",value:function(){this.dateFieldInstance&&this.dateFieldInstance.destroy(),this.dateFieldInstance=null;var e=this.props,t=e.separator,n=e.structure,o=e.placeholder,r=e.onChange,i=this.dateFieldFactory(this.input,n,t,o,!1,function(e){return r({target:{value:e}})});this.dateFieldInstance=i.render()}},{key:"handleFocus",value:function(){this.dateFieldInstance.focus()}},{key:"handleBlur",value:function(){this.dateFieldInstance.blur()}},{key:"handleRef",value:function(e){this.input=e,this.props.getInputRef(e)}},{key:"componentDidMount",value:function(){this.enhanceInputWithDateLogic()}},{key:"componentDidUpdate",value:function(e){var t=e.separator!==this.props.separator,n=e.structure!==this.props.structure;(t||n||this.props.resetValue)&&this.enhanceInputWithDateLogic()}},{key:"render",value:function(){var e=this.props,t=e.color,n=e.inputId,o=e.onChange,r=e.onKeyDown,i=e.onKeyPress,a=e.placeholder,s=e.value;return w.a.createElement(At.a,{value:s,inputId:n,color:t,onFocus:this.handleFocus,onBlur:this.handleBlur,onChange:o,onKeyDown:r,onKeyPress:i,placeholder:a,getRef:this.handleRef,type:"text"})}}]),t}(C.Component);Ft.propTypes={inputId:E.a.string,onChange:E.a.func,onKeyDown:E.a.func,onKeyPress:E.a.func,placeholder:E.a.string,structure:E.a.string,separator:E.a.string,value:E.a.string,getInputRef:E.a.func,resetValue:E.a.bool,color:E.a.string},Ft.defaultProps={onChange:St.a,onKeyDown:St.a,onKeyPress:St.a};var jt=Ft;function Dt(){var e=k()(["\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  opacity: 0;\n  min-width: 100%; // iOS width bug\n"]);return Dt=function(){return e},e}function Bt(){var e=k()(["\n  position: relative;\n"]);return Bt=function(){return e},e}var Nt=S.default.div(Bt()),Pt=S.default.input(Dt()),Lt={MMDDYYYY:"MM-DD-YYYY",DDMMYYYY:"DD-MM-YYYY",YYYYMMDD:"YYYY-MM-DD"},Ht={DD:"block.date.placeholder.day",MM:"block.date.placeholder.month",YYYY:"block.date.placeholder.year"},Vt=function(e,t,n){var o=Lt[e];return e&&t&&o?o.replace(/-/g,t).split(t).map(function(e){return n(Ht[e])}).join(t):""},Mt=function(e){function t(){var e,n;a()(this,t);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];var s=(n=u()(this,(e=p()(t)).call.apply(e,[this].concat(r)))).props,l=s.blockRef,c=s.structure,h=s.separator,d=s.t;return n.handleCommit=n.handleCommit.bind(f()(n)),n.handleChange=n.handleChange.bind(f()(n)),n.handleFocus=n.handleFocus.bind(f()(n)),n.handleBlur=n.handleBlur.bind(f()(n)),n.handleKeyDown=n.handleKeyDown.bind(f()(n)),n.inputId="stkv-text-".concat(l),n.state={isGhostInputFocused:!1,placeholder:Vt(c,h,d)},n}return b()(t,e),l()(t,[{key:"shouldComponentUpdate",value:function(e){return xt(this.props,e)}},{key:"handleKeyDown",value:function(e){switch(e.keyCode){case ke.a.ARDOWN:case ke.a.ARUP:e.stopPropagation();break;case ke.a.ENTER:this.handleCommit(e)}}},{key:"handleCommit",value:function(e){e.stopPropagation(),this.props.isActive&&this.props.onCommitAnswer(this.props.blockRef)}},{key:"handleChange",value:function(e){var t=this,n=e.target.value,o=n.replace(/[.-/]/gi,"");this.props.onStageAnswer(this.props.blockRef,o.match(/[0-9]/gi)?n:""),Object(be.a)()&&!Object(wt.a)()&&n&&setTimeout(function(){t.props.onCommitAnswer(t.props.blockRef),t.ghostInput.blur()},550)}},{key:"handleFocus",value:function(){Object(wt.a)()&&(this.setState({isGhostInputFocused:!0}),this.props.onInputFocus())}},{key:"handleBlur",value:function(){Object(wt.a)()&&(this.setState({isGhostInputFocused:!1}),this.props.onInputBlur())}},{key:"updateInputFocus",value:function(e,t){!Object(be.a)()&&t&&Q(e,this.props.layoutItemsSize)&&e.focus()}},{key:"componentDidMount",value:function(){var e=this;this.updateInputFocus(this.dateInput,this.props.isFocused),this.props.handleAppScroll(function(){e.props.isActive&&e.updateInputFocus(e.dateInput,e.props.isFocused)})}},{key:"componentDidUpdate",value:function(){this.updateInputFocus(this.dateInput,this.props.isFocused)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.structure,o=t.separator,r=t.t;e.structure===n&&e.separator===o||this.setState({placeholder:Vt(e.structure,e.separator,r)})}},{key:"render",value:function(){var e=this,t=this.props,n=t.isCommitButtonVisible,o=t.isFocused,r=t.structure,i=t.separator,a=t.value,s=void 0===a?[]:a,l=t.title,c=t.theme.colors.secondary,u=t.t,h=A()({},this.props,{title:{text:l,for:this.inputId,type:"label"}}),p=this.state.placeholder,d=function(e,t,n){if(!e||!e[0])return"";var o=e[0].split("-");return t.replace(n(Ht.YYYY),o[0]).replace(n(Ht.MM),o[1]).replace(n(Ht.DD),o[2])}(s,p,u),f=Object(wt.a)()&&this.state.isGhostInputFocused;return w.a.createElement(bt,h,w.a.createElement(M.a,{top:4,bottom:2},Object(be.a)()?w.a.createElement(Nt,null,w.a.createElement(At.a,{placeholder:p,color:c,value:d,onChange:function(){}}),w.a.createElement(Pt,{type:"date",innerRef:function(t){return e.ghostInput=t},onFocus:this.handleFocus,onBlur:this.handleBlur,onChange:this.handleChange})):w.a.createElement(jt,{getInputRef:function(t){e.dateInput=t},color:c,placeholder:p,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onKeyPress:this.props.onKeyPress,inputId:this.inputId,isFocused:o,structure:r,separator:i,resetValue:this.props.shouldClearInput})),w.a.createElement(ae,{blockRef:this.props.blockRef,onClick:this.handleCommit,isVisible:n&&!f,layoutItemsSize:this.props.layoutItemsSize,useStickyFooter:!0}))}}]),t}(C.Component);Mt.defaultProps={onCommitAnswer:function(){},onStageAnswer:function(){},onInputFocus:function(){},onInputBlur:function(){},onKeyPress:function(){},onKeyDown:function(){},theme:{colors:{secondary:X.__OVERRIDE_THIS_COLOR}},t:function(){}},Mt.propTypes={blockRef:E.a.string,index:E.a.number,isActive:E.a.bool,isCommitButtonVisible:E.a.bool,isFocused:E.a.bool,onStageAnswer:E.a.func,onCommitAnswer:E.a.func,onInputFocus:E.a.func,onInputBlur:E.a.func,onKeyDown:E.a.func,onKeyPress:E.a.func,placeholder:E.a.string,title:E.a.string,value:E.a.arrayOf(E.a.string),structure:E.a.string,separator:E.a.string,handleAppScroll:E.a.func,theme:E.a.object,layoutItemsSize:E.a.shape({footerHeight:E.a.number}),shouldClearInput:E.a.bool,t:E.a.func};var zt=n(27),Kt=n.n(zt),_t=n(70);function Ut(){var e=k()(["\n  position: absolute;\n  pointer-events: none;\n  top: ","px;\n  left: ","px;\n  width: ","px;\n  height: ","px;\n  &::before {\n    content: '';\n    width: 100%;\n    height: 100%;\n    transform-origin: 50% 50%;\n    position: absolute;\n    border-radius: 50%;\n    background: ",";\n    animation: "," 0.8s cubic-bezier(0.165, 0.84, 0.44, 1)\n      forwards 0.02s;\n    opacity: 0;\n  }\n"]);return Ut=function(){return e},e}function Wt(){var e=k()(["\n  from {\n    transform: translateX(-50%) translateY(-50%) scale(0);\n    opacity: 1;\n  }\n\n  to {\n    transform: translateX(-50%) translateY(-50%) scale(1);\n    opacity: 0.8;\n  }\n"]);return Wt=function(){return e},e}function Yt(){var e=k()(["\n  position: relative;\n  animation: "," 0.8s ease forwards;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  pointer-events: none;\n"]);return Yt=function(){return e},e}function Gt(){var e=k()(["\n  position: fixed;\n  top: ","px;\n  left: ","px;\n  height: ","px;\n  width: ","px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: ",";\n  overflow: hidden;\n"]);return Gt=function(){return e},e}function qt(){var e=k()(["\n  from {\n    opacity: 0;\n  }\n\n  to {\n    opacity: 1;\n  }\n"]);return qt=function(){return e},e}var Xt=function(e){var t=e.color;return w.a.createElement("svg",{height:"50px",width:"50px",viewBox:"0 0 50 50"},w.a.createElement("g",{fill:t,fillRule:"nonzero"},w.a.createElement("path",{d:"M25 0a25 25 0 1 0 0 50 25 25 0 0 0 0-50zm0 46a21 21 0 1 1 0-42 21 21 0 0 1 0 42z"}),w.a.createElement("path",{d:"M35 23h-8v-8h-4v8h-8v4h8v8h4v-8h8v-4z"})))},Qt=Object(S.keyframes)(qt()),Zt=S.default.div(Gt(),function(e){return e.boundingClientRect.top},function(e){return e.boundingClientRect.left},function(e){return e.boundingClientRect.height},function(e){return e.boundingClientRect.width},je.zLevels.level5),Jt=S.default.div(Yt(),Qt),$t=Object(S.keyframes)(Wt()),en=S.default.div(Ut(),function(e){return e.posY},function(e){return e.posX},function(e){return e.size},function(e){return e.size},function(e){return e.color},$t),tn=function(e){function t(){var e;return a()(this,t),(e=u()(this,p()(t).call(this))).state={dragging:!1,showCircle:!1,circlePos:{x:0,y:0}},e.handleGlobalDragEnter=e.handleGlobalDragEnter.bind(f()(e)),e.handleDrop=e.handleDrop.bind(f()(e)),e.handleDragLeave=e.handleDragLeave.bind(f()(e)),e.handleDragOver=e.handleDragOver.bind(f()(e)),e}return b()(t,e),l()(t,[{key:"handleGlobalDragEnter",value:function(e){var t=this;this.props.active&&(e.preventDefault(),this.setState({dragging:!0}),clearTimeout(this.danglingDragRemoveTimeout),this.danglingDragRemoveTimeout=setTimeout(function(){return t.clearState()},3e3))}},{key:"componentDidMount",value:function(){document.addEventListener("dragenter",this.handleGlobalDragEnter,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("dragenter",this.handleGlobalDragEnter,!1)}},{key:"clearState",value:function(){this.setState({dragging:!1,showCircle:!1,circlePos:{x:0,y:0}})}},{key:"handleDrop",value:function(e){e.preventDefault(),e.stopPropagation(),this.clearState(),this.props.active&&this.props.onDrop(e)}},{key:"handleDragLeave",value:function(e){e.preventDefault(),this.clearState()}},{key:"handleDragOver",value:function(e){clearTimeout(this.danglingDragRemoveTimeout),e.preventDefault(),e.stopPropagation(),!1===this.state.showCircle&&this.setState({showCircle:!0,circlePos:{x:e.clientX-this.props.boundingClientRect.left,y:e.clientY-this.props.boundingClientRect.top}})}},{key:"render",value:function(){var e=this,t=this.props,n=t.active,o=t.textColor,r=t.backgroundColor,i=t.boundingClientRect;return n&&this.state.dragging?w.a.createElement(Zt,{onDrop:this.handleDrop,onDragOver:this.handleDragOver,onDragLeave:this.handleDragLeave,boundingClientRect:i},this.state.showCircle&&w.a.createElement(_t.ResponsiveConsumer,null,function(t){var n=t.width,o=t.height;return w.a.createElement(en,{size:2*Math.sqrt(Math.pow(n,2)+Math.pow(o,2)),posX:e.state.circlePos.x,posY:e.state.circlePos.y,color:r})}),w.a.createElement(Jt,null,w.a.createElement(Xt,{color:o}),w.a.createElement(M.a,{top:2},w.a.createElement(H.a,{size:"sizeN1",fontWeight:"bold",color:o},this.props.dropText)))):null}}]),t}(C.PureComponent);tn.defaultProps={onDrop:function(){},textColor:"#FFFFFF",backgroundColor:"#000000",dropText:""},tn.propTypes={onDrop:E.a.func,active:E.a.bool,textColor:E.a.string,backgroundColor:E.a.string,dropText:E.a.string,boundingClientRect:E.a.object};var nn=tn;function on(){var e=k()(["\n  top: 0;\n  left: 0;\n  position: absolute;\n  overflow: hidden;\n  border-radius: 10px 10px 0 0;\n  left: 32px;\n  top: 2px;\n  bottom: 2px;\n"]);return on=function(){return e},e}function rn(){var e=k()(["\n  ",";\n  display: flex;\n  flex-direction: column;\n"]);return rn=function(){return e},e}function an(){var e=k()(["\n  position: relative;\n"]);return an=function(){return e},e}function sn(){var e=k()(["\n  from {\n    transform: translateY(0%);\n  }\n\n  to {\n    transform: translateY(-60px);\n  }\n"]);return sn=function(){return e},e}var ln=function(e){var t=e.color;return w.a.createElement("svg",{style:{display:"block"},width:"92px",height:"68px",viewBox:"0 0 92 68"},w.a.createElement("path",{d:"M46 .64a27.9 27.9 0 0 1 19.78 8.19 27.78 27.78 0 0 1 8.03 20A19.95 19.95 0 0 1 92 48.63c0 11.04-8.97 20-20 20H23c-12.67 0-23-10.33-23-23a22.94 22.94 0 0 1 18.63-22.46 27.79 27.79 0 0 1 7.56-14.34A27.97 27.97 0 0 1 46 .63zm0 6c-5.64 0-11.26 2.1-15.56 6.4-3.66 3.66-5.96 10.59-6.51 15.34 0 .06.2.06-2.5.32A17.02 17.02 0 0 0 6 45.64c0 9.42 7.58 17 17 17h49c7.8 0 14-6.2 14-14 0-7.81-6.2-14-14-14H67.12v-3.36c0-10.7-1.43-14.1-5.59-18.24-4.32-4.3-9.9-6.4-15.53-6.4z",fill:t,fillRule:"nonzero"}))},cn=function(e){var t=e.color;return w.a.createElement("svg",{width:"26px",height:"60px",viewBox:"0 0 26 31"},w.a.createElement("path",{d:"M13 .53l-2.03 1.89-11 10 4.06 4.44L10 11.42v19.22h6V11.42l5.97 5.44c.03.02 4.06-4.44 4.06-4.44l-11-10c-.4-.36-1.07-1-2.03-1.9z",fill:t,fillRule:"nonzero"}))},un=Object(S.keyframes)(sn()),hn=S.default.div(an()),pn=S.default.div(rn(),function(e){return e.animated?"\n  animation: ".concat(un," 1.2s cubic-bezier(0.68, 0.27, 0.36, 0.77) infinite;\n  "):""}),dn=S.default.div(on()),fn=function(e){var t=e.color,n=e.dimmed,o=e.animated;return n&&(t=Object(X.xxtransparent)(t)),w.a.createElement(hn,null,w.a.createElement(ln,{color:t}),w.a.createElement(dn,null,w.a.createElement(pn,{animated:o},w.a.createElement(cn,{color:t}),w.a.createElement(cn,{color:t}))))},mn=n(116),bn=n.n(mn),vn=n(668),gn=n.n(vn),yn=n(102),kn=n.n(yn);function Cn(){var e=k()(["\n  width: 1px;\n  min-width: 1px;\n  flex: 1;\n  display: flex;\n  align-items: center;\n"]);return Cn=function(){return e},e}function wn(){var e=k()(["\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]);return wn=function(){return e},e}function Sn(){var e=k()(["\n  display: flex;\n  justify-content: space-between;\n"]);return Sn=function(){return e},e}function xn(){var e=k()(["\n  height: ",";\n  width: ",";\n  display: block;\n  max-width: 100%;\n  object-fit: cover;\n"]);return xn=function(){return e},e}function En(){var e=k()(["\n  border: 1px solid ",";\n  border-radius: 0 0 3px 3px;\n  width: 100%;\n  padding: 6px 12px;\n"]);return En=function(){return e},e}function On(){var e=k()(["\n  border: 1px solid ",";\n  border-bottom: none;\n  border-radius: 3px 3px 0 0;\n  width: 100%;\n"]);return On=function(){return e},e}function Rn(){var e=k()(["\n  width: ",";\n  margin: ",";\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n  max-width: 100%;\n  transition: all 0.2s ease;\n  ",";\n"]);return Rn=function(){return e},e}function An(){var e=k()(["\n  height: 200px;\n  width: ",";\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: ",";\n"]);return An=function(){return e},e}function In(){var e=k()(["\n  from {\n  transform: scale(1);\n  opacity: 1;\n  }\n\n  to {\n  transform: scale(0.7);\n  opacity: 0.01;\n  }\n"]);return In=function(){return e},e}function Tn(){var e=k()(["\n  from {\n  transform: scale(0.7);\n  opacity: 0.01;\n  }\n\n  to {\n  transform: scale(1);\n  opacity: 1;\n  }\n"]);return Tn=function(){return e},e}var Fn=function(e){var t=e.color;return w.a.createElement("svg",{width:"57px",heifht:"69px",viewBox:"0 0 57 69"},w.a.createElement("path",{d:"M36.7 0H0v69h57V20L36.7 0zM38 7.9L49 18.5H38V7.8zM4.7 64.4V4.6h28.8v18.6h18.9v41.2H4.7z",fill:t,fillRule:"nonzero"}))},jn=Object(S.keyframes)(Tn()),Dn=Object(S.keyframes)(In()),Bn=S.default.div(An(),function(e){return e.fullWidth?"100%":"200px"},function(e){return Object(X.xxtransparent)(e.color)}),Nn=S.default.div(Rn(),function(e){return e.fullWidth?"100%":"auto"},function(e){return e.fullWidth?"none":"0 20px"},function(e){return"\n  animation: ".concat(e.visible?jn:Dn," 0.2s ease forwards;")}),Pn=S.default.div(On(),function(e){return e.color}),Ln=S.default.div(En(),function(e){return e.color}),Hn=S.default.img(xn(),function(e){return e.fullWidth?"auto":"200px"},function(e){return e.fullWidth?"100%":"auto"}),Vn=S.default.div(Sn()),Mn=S.default.div(wn()),zn=S.default.div(Cn()),Kn=function(e){function t(e){var n;return a()(this,t),(n=u()(this,p()(t).call(this,e))).state={visible:!0},n.handleCancel=n.handleCancel.bind(f()(n)),n}return b()(t,e),l()(t,[{key:"handleCancel",value:function(){this.setState({visible:!1}),setTimeout(this.props.onCancel,200)}},{key:"render",value:function(){var e=function(e){var t=e.split("."),n=t.pop();return[t.join("."),n]}(this.props.file.name),t=bn()(e,2),n=t[0],o=t[1];return w.a.createElement(Nn,{visible:this.state.visible,fullWidth:"sm"===this.props.breakpoint},w.a.createElement(Pn,{color:this.props.theme.colors.secondary},null!=this.props.file.blob?w.a.createElement(Hn,{fullWidth:"sm"===this.props.breakpoint,src:this.props.file.blob,alt:"Uploaded image"}):w.a.createElement(Bn,{fullWidth:"sm"===this.props.breakpoint,color:this.props.theme.colors.secondary},w.a.createElement(Fn,{color:this.props.theme.colors.secondary}))),w.a.createElement(Ln,{color:this.props.theme.colors.secondary},w.a.createElement(Vn,null,w.a.createElement(zn,null,w.a.createElement(H.a,{size:"sizeN2",align:"center",color:this.props.theme.colors.primary,ellipsis:!0},n,"."),w.a.createElement(H.a,{size:"sizeN2",align:"center",color:this.props.theme.colors.primary},o)),w.a.createElement(M.a,{left:1}),w.a.createElement(Mn,{onClick:this.handleCancel},w.a.createElement(kn.a,{svg:gn.a,color:this.props.theme.colors.primary})))))}}]),t}(C.PureComponent);function _n(e){return new Promise(function(t,n){var o=new window.FileReader;o.onload=function(e){return t(e.target.result)},o.onerror=n,o.readAsDataURL(e)})}var Un=["image/png","image/gif","image/jpeg","image/svg+xml"],Wn=function(e){return e.replace(/(<([^>]+)>)/gi,"")},Yn=function(e){return Un.some(function(t){return e===t})},Gn=n(114),qn=n.n(Gn),Xn=n(575),Qn=n.n(Xn),Zn=n(270),Jn=n.n(Zn),$n=n(145);function eo(){var e=k()(["\n  border: ",";\n  background: ",";\n  height: ",";\n  border-radius: 3px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: relative;\n  transition: background 0.1s ease;\n"]);return eo=function(){return e},e}function to(){var e=k()(["\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n"]);return to=function(){return e},e}function no(){var e=k()(["\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  overflow: hidden;\n  clip: rect(1px, 1px, 1px, 1px);\n"]);return no=function(){return e},e}var oo="UPLOADING",ro="PREVIEW",io="DEFAULT",ao=S.default.input(no()),so=S.default.label(to()),lo=S.default.div(eo(),function(e){return e.visible?"1px dashed ".concat(e.color):"none"},function(e){return e.hovered?Object(X.xxtransparent)(e.color):Object(X.xxxtransparent)(e.color)},function(e){return e.visible?"300px":"auto"}),co=function(e){function t(){var e,n;a()(this,t);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(n=u()(this,(e=p()(t)).call.apply(e,[this].concat(r)))).handleCommit=n.handleCommit.bind(f()(n)),n.handleChange=n.handleChange.bind(f()(n)),n.handleDrop=n.handleDrop.bind(f()(n)),n.handleCancel=n.handleCancel.bind(f()(n)),n.inputId="stkv-text-".concat(n.props.blockRef),n.handleUploadProgressChange=n.handleUploadProgressChange.bind(f()(n)),n.handleUploadSuccess=n.handleUploadSuccess.bind(f()(n)),n.handleUploadError=n.handleUploadError.bind(f()(n)),n.state={uploading:!1,file:{}},n}return b()(t,e),l()(t,[{key:"handleCommit",value:function(e){e.stopPropagation(),this.props.isActive&&this.props.onCommitAnswer(this.props.blockRef)}},{key:"handleCancel",value:function(){this.setState({file:{}}),this.props.onStageAnswer(this.props.blockRef,null)}},{key:"handleChange",value:function(e){var t=e.target.files;t.length&&this.handleUpload(t[0])}},{key:"handleDrop",value:function(e){var t=e.dataTransfer.files;this.handleUpload(t[0])}},{key:"handleUploadProgressChange",value:function(e){this.setState({uploadProgress:e})}},{key:"handleUploadSuccess",value:function(e){this.setState({file:e,uploading:!1}),this.props.onStageAnswer(this.props.blockRef,{value:e.s3Filename,label:e.name})}},{key:"handleUploadError",value:function(e){this.setState({uploading:!1});var t="file-size-exceeded"===(e&&e.message)?"label.error.sizeLimit":"label.error.upload";this.setState({uploadError:t})}},{key:"handleUpload",value:function(){var e=Kt()(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.uploadFile(t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),this.handleUploadError(e.t0);case 8:case"end":return e.stop()}},e,this,[[0,5]])}));return function(t){return e.apply(this,arguments)}}()},{key:"uploadFile",value:function(){var e=Kt()(regeneratorRuntime.mark(function e(t){var n,o,r,i,a,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({uploading:!0,uploadProgress:0,uploadError:null}),n=this.props,o=n.formId,r=n.id,e.next=4,Object($n.b)(o,r);case 4:if(i=e.sent,!(t.size>i.maxSize)){e.next=7;break}throw new Error("file-size-exceeded");case 7:return e.next=9,Object($n.e)(t,i,this.handleUploadProgressChange);case 9:if(a=e.sent,!Yn(t.type)){e.next=16;break}return e.next=13,_n(t);case 13:e.t0=e.sent,e.next=17;break;case 16:e.t0=null;case 17:s=e.t0,this.handleUploadSuccess({name:t.name,type:t.type,s3Filename:a,blob:s});case 19:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"componentWillReceiveProps",value:function(e){e.shouldClearInput&&this.setState({file:{}})}},{key:"getPhase",value:function(){var e=this.state,t=e.file;return e.uploading?oo:t.name?ro:io}},{key:"renderContent",value:function(){var e=this.props,t=e.t,n=e.breakpoint,o=this.state.file,r=this.getPhase();return r===oo?w.a.createElement(qn.a,{vertical:!0,align:"center"},w.a.createElement(fn,{color:this.props.theme.colors.secondary,animated:!0}),w.a.createElement(M.a,{top:2}),w.a.createElement(Qn.a,{value:this.state.uploadProgress,color:this.props.theme.colors.secondary}),w.a.createElement(M.a,{top:1}),w.a.createElement(H.a,{size:"sizeN1",align:"center",color:this.props.theme.colors.primary},t("block.fileUpload.uploading"))):r===io?w.a.createElement(so,{htmlFor:this.inputId},w.a.createElement(qn.a,{vertical:!0,align:"center"},w.a.createElement(fn,{color:this.props.theme.colors.secondary,dimmed:!0}),w.a.createElement(M.a,{top:2}),w.a.createElement("div",null,w.a.createElement(H.a,{size:"sizeN1",fontWeight:"bold",color:this.props.theme.colors.secondary,inline:!0},Wn(t("block.fileUpload.choose"))," "),!Object(X.isTouch)()&&w.a.createElement(H.a,{size:"sizeN1",color:this.props.theme.colors.primary,inline:!0},Wn(t("block.fileUpload.drag")))),w.a.createElement(M.a,{top:1}),w.a.createElement(H.a,{size:"sizeN2",align:"center",color:this.props.theme.colors.primary},t("block.fileUpload.hintSize"))),w.a.createElement(ao,{type:"file",id:this.inputId,onChange:this.handleChange})):r===ro?w.a.createElement(Kn,{theme:this.props.theme,file:o,onCancel:this.handleCancel,breakpoint:n}):void 0}},{key:"render",value:function(){var e=this,t=this.props,n=t.t,o=t.breakpoint,r=t.theme,i=t.layoutItemsSize,a=this.state.uploadError,s=this.getPhase();return w.a.createElement(bt,B()({},this.props,{customError:a}),w.a.createElement(M.a,{top:4,bottom:2},w.a.createElement(Jn.a,null,function(t){var n=t.hovered;return w.a.createElement(lo,{visible:"sm"!==o||s!==ro,color:r.colors.secondary,hovered:n&&s===io},e.renderContent())}),w.a.createElement(nn,{textColor:r.colors.background,backgroundColor:r.colors.secondary,boundingClientRect:i.boundingClientRect,active:this.props.isActive&&!this.state.uploading&&!this.state.file.name,onDrop:this.handleDrop,dropText:n("block.fileUpload.dropFiles")})),w.a.createElement(ae,{blockRef:this.props.blockRef,isVisible:this.props.isCommitButtonVisible,onClick:this.handleCommit,layoutItemsSize:this.props.layoutItemsSize,useStickyFooter:!0}))}}]),t}(C.PureComponent);co.defaultProps={file:{},onCommitAnswer:St.a,onStageAnswer:St.a,t:function(e){return e},theme:{colors:{primary:"#FF00FF",secondary:"#FF00FF"}},breakpoint:"md"},co.propTypes={blockRef:E.a.string,breakpoint:E.a.string,isCommitButtonVisible:E.a.bool,isActive:E.a.bool,onCommitAnswer:E.a.func,onStageAnswer:E.a.func,t:E.a.func,shouldClearInput:E.a.bool,layoutItemsSize:E.a.object,theme:E.a.object};var uo=Object(_t.withBreakpoint)(co),ho=n(86),po=n.n(ho),fo=n(665),mo=n.n(fo),bo=n(659),vo=n.n(bo),go=n(658),yo=n.n(go);function ko(){var e=k()(["\n  outline: none;\n  min-height: 1px;\n  margin-top: -1px;\n"]);return ko=function(){return e},e}var Co=S.default.div(ko()),wo=function(e){function t(){return a()(this,t),u()(this,p()(t).apply(this,arguments))}return b()(t,e),l()(t,[{key:"tryFocus",value:function(){var e=this.topFocusableRef&&this.bottomFocusableRef&&this.focusableRef,t=document.activeElement===this.focusableRef||document.activeElement===this.topFocusableRef||document.activeElement===this.bottomFocusableRef,n=Q(this.topFocusableRef,A()({},this.props.layoutItemsSize)),o=Q(this.bottomFocusableRef,A()({},this.props.layoutItemsSize));return!!t||!!e&&(n?(this.topFocusableRef.focus(),!0):!!o&&(this.bottomFocusableRef.focus(),!0))}},{key:"componentDidUpdate",value:function(){var e=this;this.props.shouldFocus&&(this.tryFocus()||setTimeout(function(){return e.tryFocus()},500))}},{key:"render",value:function(){var e=this,t=this.props,n=t.onKeyDown,o=t.children;return w.a.createElement(Co,{tabIndex:"-1",innerRef:function(t){return e.focusableRef=t},onKeyDown:n,"data-qa":"focusable"},w.a.createElement(Co,{tabIndex:"-1",innerRef:function(t){return e.topFocusableRef=t}}),o,w.a.createElement(Co,{tabIndex:"-1",innerRef:function(t){return e.bottomFocusableRef=t}}))}}]),t}(C.Component);wo.propTypes={children:E.a.any,shouldFocus:E.a.bool,onKeyDown:E.a.func,layoutItemsSize:E.a.object};var So=wo,xo=function(e){var t=e.color,n=e.maxSelection,o=e.minSelection,r=e.selectionCount,i=e.t;return w.a.createElement(M.a,{bottom:2},w.a.createElement(H.a,{color:t,fontWeight:"regular",htmlTag:"p",size:"size0"},Object(Z.a)(i(function(e){var t=e.t,n=e.minSelection,o=e.maxSelection,r=e.selectionCount;return n||o?!n&&o?function(e,t,n){return 0===n?e("block.multipleChoice.selectionLimit.hint.selectUpToX",{x:t}):t===n?e("block.multipleChoice.selectionLimit.hint.noMore"):e("block.multipleChoice.selectionLimit.hint.selectUpToXMore",{x:t-n})}(t,o,r):n&&!o?function(e,t,n){return 0===n?e("block.multipleChoice.selectionLimit.hint.selectAtLeastX",{x:t}):t<=n?e("block.multipleChoice.selectionLimit.hint.noMore"):e("block.multipleChoice.selectionLimit.hint.selectAtLeastXMore",{x:t-n})}(t,n,r):n===o?function(e,t,n){return 0===n?e("block.multipleChoice.selectionLimit.hint.selectXchoices",{x:t}):t===n?e("block.multipleChoice.selectionLimit.hint.noMore"):e("block.multipleChoice.selectionLimit.hint.selectXMore",{x:t-n})}(t,n,r):n!==o?function(e,t,n,o){return 0===o?e("block.multipleChoice.selectionLimit.hint.selectXYchoices",{x:t,y:n}):o<t?e("block.multipleChoice.selectionLimit.hint.selectAtLeastXMore",{x:t-o}):o>=t&&o<n?e("block.multipleChoice.selectionLimit.hint.selectUpToXMore",{x:n-o}):o===n?e("block.multipleChoice.selectionLimit.hint.noMore"):void 0}(t,n,o,r):void 0:function(e){return e("block.multipleChoice.hint")}(t)}({t:i,minSelection:o,maxSelection:n,selectionCount:r})))))};xo.defaultProps={t:function(e){return e}},xo.propTypes={color:E.a.string,maxSelection:E.a.number,minSelection:E.a.number,selectionCount:E.a.number,t:E.a.func};var Eo=Object(J.a)(xo);function Oo(e){return ke.a.A<=e&&e<=ke.a.Z}var Ro=ke.a.Z-ke.a.A+1;function Ao(e){return String.fromCharCode(65+e%Ro)}function Io(){var e=k()(["\n  opacity: 0;\n  pointer-events: none;\n  position: absolute;\n  height: 1px;\n  overflow-y: scroll;\n"]);return Io=function(){return e},e}var To=S.default.div(Io()),Fo=-1,jo=T()(JSON.stringify,function(e){var t=e.choices,n=e.t;return t.map(function(e){return{label:n(e.label),ref:e.ref}})}),Do=function(e){function t(){return a()(this,t),u()(this,p()(t).apply(this,arguments))}return b()(t,e),l()(t,[{key:"render",value:function(){var e=this.props,t=e.choices,n=e.allowOtherChoice,o=e.otherValue,r=e.vertical;return w.a.createElement(C.Fragment,null,t.map(function(e){return w.a.createElement(mo.a,{title:e.label,key:e.ref,keyHelperLetter:"MM"})}),n&&r&&w.a.createElement(mo.a,{title:o,keyHelperLetter:"MM"}))}}]),t}(C.PureComponent);Do.propTypes={choices:E.a.array,allowOtherChoice:E.a.bool,vertical:E.a.bool,otherValue:E.a.string,t:E.a.func};var Bo=function(e){function t(e){var n;return a()(this,t),(n=u()(this,p()(t).call(this,e))).state={keyboardHoveredIndex:Fo,editingOtherChoice:!1,longestChoiceWidth:null},n.renderedColumns=1,n.firstCharacterShortcuts=[],n.handleSelect=n.handleSelect.bind(f()(n)),n.handleCommitAnswer=n.handleCommitAnswer.bind(f()(n)),n.handleKeyDown=n.handleKeyDown.bind(f()(n)),n.handleOtherChoiceClick=n.handleOtherChoiceClick.bind(f()(n)),n.handleOtherChoiceCommit=n.handleOtherChoiceCommit.bind(f()(n)),n.handleOtherChoiceChange=n.handleOtherChoiceChange.bind(f()(n)),n.handleOtherChoiceBlur=n.handleOtherChoiceBlur.bind(f()(n)),n.handleOtherChoiceKeyDown=n.handleOtherChoiceKeyDown.bind(f()(n)),n.handleColumnsChanged=n.handleColumnsChanged.bind(f()(n)),n}return b()(t,e),l()(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.state.keyboardHoveredIndex>=0;this.props.isActive&&e.isActive||t&&this.setState({keyboardHoveredIndex:Fo})}},{key:"shouldComponentUpdate",value:function(e,t){return xt(this.props,e)||this.state.longestChoiceWidth!==t.longestChoiceWidth||e.choices!==this.props.choices}},{key:"componentDidMount",value:function(){this.updateLongestChoiceWidth()}},{key:"componentDidUpdate",value:function(e){if(this.props.isActive){e.choices.length!==this.props.choices.length&&this.props.recenter(),this.updateLongestChoiceWidth()}else{var t=e.theme,n=this.props.theme;!t.isFontLoaded&&n.isFontLoaded&&this.updateLongestChoiceWidth()}}},{key:"updateLongestChoiceWidth",value:function(){if(this.hiddenListRef){var e=this.props.longestChoiceWidth||this.hiddenListRef.clientWidth;e!==this.state.longestChoiceWidth&&this.setState({longestChoiceWidth:e})}}},{key:"createKeyShortcut",value:function(e,t,n){var o=this.props.keyboardShortcutType;if("letter"===o){var r=Ao(e);return e>=Ro&&(r+=Ao(e)),r}if("firstCharacter"===o){var i=t.charAt(0).toUpperCase();return this.firstCharacterShortcuts.push(i),i}if("custom"===o)return this.props.t(n)}},{key:"handleOtherChoiceChange",value:function(e){(e.preventDefault(),e.stopPropagation(),Object(be.a)()&&!Object(wt.a)())&&(0,this.props.recenter)(ge,ge);this.setState({otherValue:e.target.value})}},{key:"handleLetterKeyboardShortcut",value:function(e){var t=e-ke.a.A;this.handleKeyboardSelect(t)}},{key:"handleFirstCharacterShortcut",value:function(e){var t=this.firstCharacterShortcuts.findIndex(function(t){return String.fromCharCode(e)===t});this.handleKeyboardSelect(t)}},{key:"handleCustomCharacterShortcut",value:function(e){var t=this.props,n=t.choices,o=t.t,r=n.find(function(t){return o(t.keyboardShortcut)===String.fromCharCode(e)});r&&this.handleSelect(r.ref)}},{key:"handleKeyDown",value:function(e){var t=e.keyCode,n=this.props.keyboardShortcutType,o={};if("letter"===n&&Oo(t))return this.handleLetterKeyboardShortcut(t),e.preventDefault(),void e.stopPropagation();if("firstCharacter"===n&&Oo(t))return this.handleFirstCharacterShortcut(t),e.preventDefault(),void e.stopPropagation();if("custom"===n&&Oo(t))return this.handleCustomCharacterShortcut(t),e.preventDefault(),void e.stopPropagation();(o[ke.a.SPACE]=this.handleSelectHovered,o[ke.a.ENTER]=this.handleSelectHovered,this.props.verticalAlignment?(o[ke.a.ARDOWN]=this.hoverNextStep,o[ke.a.ARUP]=this.hoverPreviousStep):(o[ke.a.ARRIGHT]=this.hoverNextStep,o[ke.a.ARLEFT]=this.hoverPreviousStep,o[ke.a.ARDOWN]=this.hoverNextRow,o[ke.a.ARUP]=this.hoverPreviousRow),o[t])&&(o[t].call(this,e)||(e.preventDefault(),e.stopPropagation()))}},{key:"handleOtherChoiceClick",value:function(){this.unstageOtherChoice(),this.props.onInputFocus(),this.setState({editingOtherChoice:!0})}},{key:"handleOtherChoiceBlur",value:function(){var e=this;setTimeout(function(){e.props.onInputBlur(),e.setState({editingOtherChoice:!1})},300)}},{key:"handleOtherChoiceCommit",value:function(){var e=this;setTimeout(function(){e.props.onInputBlur(),e.stageOtherChoice(e.state.otherValue),e.setState({editingOtherChoice:!1})},300)}},{key:"removeStagedOtherChoice",value:function(e){var t=this;return e.filter(function(e){return e!==t.getOtherValue()})}},{key:"unstageOtherChoice",value:function(){var e=this.props,t=e.onStageAnswer,n=e.value,o=e.allowMultipleSelection,r=e.blockRef,i=n||[];t(r,o?this.removeStagedOtherChoice(i):[])}},{key:"stageOtherChoice",value:function(e){var t=this,n=this.props,o=n.onStageAnswer,r=n.value,i=n.allowMultipleSelection,a=n.blockRef,s=r||[],l=(i?[].concat(po()(this.removeStagedOtherChoice(s)),[e]):[e]).filter(Boolean);o(a,l),l.length&&!i&&setTimeout(function(){t.handleCommitAnswer()},550)}},{key:"hoverNextRow",value:function(){return this.changekeyboardHoveredIndex(this.state.keyboardHoveredIndex>=0?this.state.keyboardHoveredIndex+this.renderedColumns:0)}},{key:"hoverPreviousRow",value:function(){return this.changekeyboardHoveredIndex(this.state.keyboardHoveredIndex-this.renderedColumns)}},{key:"hoverNextStep",value:function(){return this.changekeyboardHoveredIndex(this.state.keyboardHoveredIndex+1)}},{key:"hoverPreviousStep",value:function(){return this.changekeyboardHoveredIndex(this.state.keyboardHoveredIndex-1)}},{key:"changekeyboardHoveredIndex",value:function(e){return e>=this.getChoicesLength()||(e<0||(this.setState({keyboardHoveredIndex:e}),this.props.scrollToChoice(this.getPositionRef(e)),!1))}},{key:"getOtherChoiceRef",value:function(){return"".concat(this.props.blockRef,"-other")}},{key:"getPositionRef",value:function(e){if(this.props.allowOtherChoice&&e===this.getChoicesLength()-1)return this.getOtherChoiceRef();var t=this.props.choices[e];return t?t.ref:void 0}},{key:"handleSelectHovered",value:function(){this.handleKeyboardSelect(this.state.keyboardHoveredIndex)}},{key:"handleKeyboardSelect",value:function(e){if(e===Fo)this.handleCommitAnswer();else{var t=this.getPositionRef(e);if(t!==this.getOtherChoiceRef())t&&this.handleSelect(t);else((this.props.value||[]).includes(this.getOtherValue())||this.canSelectMoreChoices())&&this.handleOtherChoiceClick()}}},{key:"handleSelect",value:function(e){var t,n=this,o=this.props,r=o.onStageAnswer,i=o.allowMultipleSelection,a=o.value||[],s=a.includes(e);(s||this.canSelectMoreChoices())&&(t=i?s?a.filter(function(t){return t!==e}):[].concat(po()(a),[e]):s?[]:[e],r(this.props.blockRef,t),i||s||setTimeout(function(){n.handleCommitAnswer()},550))}},{key:"handleColumnsChanged",value:function(e){this.renderedColumns=e}},{key:"handleOtherChoiceKeyDown",value:function(e){e.stopPropagation(),e.keyCode===ke.a.ENTER&&this.handleOtherChoiceCommit(),e.keyCode===ke.a.ESCAPE&&this.handleOtherChoiceBlur()}},{key:"handleCommitAnswer",value:function(){this.props.onCommitAnswer(this.props.blockRef)}},{key:"getOtherValue",value:function(){var e=this.props,t=e.choices,n=e.value;return n&&n.find(function(e){return!function(e){return t.map(function(e){return e.ref}).includes(e)}(e)})}},{key:"getChoicesLength",value:function(){var e=this.props,t=e.choices;return e.allowOtherChoice?t.length+1:t.length}},{key:"canSelectMoreChoices",value:function(){var e=this.props,t=e.value,n=e.validations.maxSelection;return!n||(t||[]).length<n}},{key:"render",value:function(){var e=this,t=this.props,n=t.allowMultipleSelection,o=t.allowOtherChoice,r=t.isCommitButtonVisible,i=t.isActive,a=t.isFocused,s=t.choices,l=t.t,c=t.theme,u=t.title,h=t.validations,p=t.supersized,d=t.showLabels,f=t.value,m=t.verticalAlignment,b=t.withImage,v=h.minSelection,g=h.maxSelection,y=this.state.otherValue,k=this.getChoicesLength(),C=A()({},this.props,{title:{text:u,type:"legend"},useFieldset:!0}),S=f||[],x=i?this.state.keyboardHoveredIndex:null,E=!this.canSelectMoreChoices(),O=!m&&!this.props.longestChoiceWidth,R=this.props.longestChoiceWidth||this.state.longestChoiceWidth,I=b?yo.a:vo.a;return w.a.createElement(bt,C,s&&w.a.createElement("div",{ref:function(t){return e.blockNode=t}},w.a.createElement(M.a,{top:4,bottom:2},n&&w.a.createElement(Eo,{color:c.colors.secondary,maxSelection:g,minSelection:v,selectionCount:S.length}),O&&w.a.createElement(To,{innerRef:function(t){return e.hiddenListRef=t}},w.a.createElement(Do,{choices:jo({choices:s,t:l}),allowOtherChoice:o,otherValue:y,vertical:m})),w.a.createElement(So,{shouldFocus:a&&!this.state.editingOtherChoice,layoutItemsSize:this.props.layoutItemsSize,onKeyDown:this.handleKeyDown,"data-qa":"focusable"},w.a.createElement(fo.ChoicesLayout,{onChangeColumns:this.handleColumnsChanged,vertical:m,longestChoiceWidth:R,ignoreBreakpoints:b},s.map(function(t,n){return w.a.createElement(mo.a,{dataQa:"choice",title:d?l(t.label):"",key:t.ref,choiceRef:t.ref,hovered:x===n,selected:S.includes(t.ref),disabled:E&&!S.includes(t.ref),onClick:e.handleSelect,color:c.colors.secondary,contextBackgroundColor:c.colors.background,keyHelperHint:l("label.hint.key"),keyHelperLetter:e.createKeyShortcut(n,t.label,t.keyboardShortcut),withImage:b,superSizedImage:p,isCropped:t.isCropped,imageSrc:t.attachment&&t.attachment.resource&&t.attachment.resource.default})}),o&&w.a.createElement(I,{dataQa:"other-choice",placeholder:l("block.multipleChoice.other"),value:y,editing:this.state.editingOtherChoice,choiceRef:this.getOtherChoiceRef(),hovered:x===k-1,disabled:E&&!this.getOtherValue(),selected:!!this.getOtherValue(),onClick:this.handleOtherChoiceClick,onChange:this.handleOtherChoiceChange,onBlur:this.handleOtherChoiceBlur,onEditConfirm:this.handleOtherChoiceCommit,onKeyDown:this.handleOtherChoiceKeyDown,color:c.colors.secondary,superSizedImage:p,contextBackgroundColor:c.colors.background,keyHelperHint:l("label.hint.key"),keyHelperLetter:this.createKeyShortcut(k-1,y)})))),n&&w.a.createElement(ae,{blockRef:this.props.blockRef,onClick:this.handleCommitAnswer,isVisible:r&&!this.state.editingOtherChoice,layoutItemsSize:this.props.layoutItemsSize,useStickyFooter:!0})))}}]),t}(C.Component);Bo.defaultProps={onCommitAnswer:St.a,onStageAnswer:St.a,onInputFocus:St.a,onInputBlur:St.a,recenter:St.a,scrollToChoice:St.a,t:function(e){return e},keyboardShortcutType:"letter",verticalAlignment:!0,theme:{colors:{secondary:X.__OVERRIDE_THIS_COLOR,background:X.__OVERRIDE_THIS_COLOR}},validations:{},showLabels:!0,withImage:!1},Bo.propTypes={allowMultipleSelection:E.a.bool,allowOtherChoice:E.a.bool,title:E.a.string,isActive:E.a.bool,isFocused:E.a.bool,isCommitButtonVisible:E.a.bool,blockRef:E.a.string,choices:E.a.arrayOf(E.a.shape({id:E.a.oneOfType([E.a.string,E.a.number]),ref:E.a.string,label:E.a.string,attachment:E.a.shape({resource:E.a.shape({default:E.a.string})})})),onStageAnswer:E.a.func,onCommitAnswer:E.a.func,onInputFocus:E.a.func,onInputBlur:E.a.func,verticalAlignment:E.a.bool,handleAppScroll:E.a.func,recenter:E.a.func,scrollToChoice:E.a.func,t:E.a.func,shouldClearInput:E.a.bool,keyboardShortcutType:E.a.string,value:E.a.array,theme:E.a.object,layoutItemsSize:E.a.object,validations:E.a.shape({minSelection:E.a.number,maxSelection:E.a.number}),showLabels:E.a.bool,withImage:E.a.bool,supersized:E.a.bool,longestChoiceWidth:E.a.number};var No=Bo,Po={sm:110,md:140,lg:150},Lo=T()(JSON.stringify,function(e){var t=e.choices,n=e.croppedChoiceRefs;return t.map(function(e){return A()({},e,{isCropped:!!n[e.ref]})})}),Ho=function(e){function t(e){var n;return a()(this,t),(n=u()(this,p()(t).call(this,e))).state={croppedChoiceRefs:{}},n}return b()(t,e),l()(t,[{key:"updateCroppedChoiceRefs",value:function(){var e=Kt()(regeneratorRuntime.mark(function e(t,n,o){var r,i,a,s,l,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:if(r={},!this.updatingCroopedChoicesRefs){e.next=5;break}return e.abrupt("return");case 5:this.updatingCroopedChoicesRefs=!0,e.t0=regeneratorRuntime.keys(n);case 7:if((e.t1=e.t0()).done){e.next=24;break}if(i=e.t1.value,a=n[i],s=a.attachment&&a.attachment.resource,!(l=s&&s.src)||null!=o[a.ref]){e.next=22;break}return e.prev=13,e.next=16,Object($n.a)(l);case 16:c=e.sent,r[a.ref]=c,e.next=22;break;case 20:e.prev=20,e.t2=e.catch(13);case 22:e.next=7;break;case 24:Object.keys(r).length&&this.setState({croppedChoiceRefs:A()({},o,r)}),this.updatingCroopedChoicesRefs=!1;case 27:case"end":return e.stop()}},e,this,[[13,20]])}));return function(t,n,o){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.updateCroppedChoiceRefs(this.props.supersized,this.props.choices,this.state.croppedChoiceRefs)}},{key:"componentDidUpdate",value:function(){this.updateCroppedChoiceRefs(this.props.supersized,this.props.choices,this.state.croppedChoiceRefs)}},{key:"render",value:function(){var e=this.props,t=e.breakpoint,n=e.supersized,o=e.choices,r=Po[t]*(n?1.5:1),i=n?Lo({choices:o,croppedChoiceRefs:this.state.croppedChoiceRefs}):o;return w.a.createElement(No,B()({},this.props,{choices:i,verticalAlignment:!1,longestChoiceWidth:Math.round(r),withImage:!0}))}}]),t}(C.Component);E.a.defaultProps={choices:[]},Ho.propTypes={choices:E.a.array};var Vo=Object(_t.withBreakpoint)(Ho),Mo=n(569),zo=n(565),Ko=n(655),_o=n.n(Ko),Uo=n(564),Wo=n.n(Uo);function Yo(){var e=k()(["\n  position: absolute;\n  right: 5px;\n  top: 14px;\n  user-select: none;\n"]);return Yo=function(){return e},e}function Go(){var e=k()(["\n  appearance: none;\n  display: block;\n  width: 100%;\n  font-family: inherit;\n  color: ",";\n  padding-left: 0px;\n  padding-right: 26px;\n  padding-bottom: 8px;\n  border-radius: 0;\n  border: none;\n  transition: 0.2s;\n  background-color: transparent;\n  ",";\n  box-shadow: 0 1px ",";\n\n  &:-moz-focusring {\n    color: transparent;\n    text-shadow: 0 0 0 transparent;\n  }\n\n  outline: none;\n\n  &:focus {\n    outline: none;\n  }\n"]);return Go=function(){return e},e}function qo(){var e=k()(["\n  position: relative;\n"]);return qo=function(){return e},e}var Xo=S.default.div(qo()),Qo=S.default.select(Go(),function(e){return e.color},function(e){return je.textSizes[e.size]},function(e){return Object(X.xxtransparent)(e.color)}),Zo=Object(S.default)(kn.a).attrs({svg:Wo.a})(Yo()),Jo=function(e){function t(e){var n;return a()(this,t),(n=u()(this,p()(t).call(this,e))).state={value:""},n.handleChange=n.handleChange.bind(f()(n)),n}return b()(t,e),l()(t,[{key:"handleChange",value:function(e){var t=this;this.setState({value:e.target.value}),this.props.onStageAnswer(this.props.blockRef,[e.target.value]),setTimeout(function(){t.props.onCommitAnswer(t.props.blockRef)},550)}},{key:"render",value:function(){var e=this.props,t=e.choices,n=e.color,o=e.placeholder,r=e.breakpoint,i=this.state.value,a=t.map(function(e){return e.label}),s=""!==i,l=Object(X.xxtransparent)(n);return w.a.createElement(Xo,null,w.a.createElement(Qo,{size:Object(L.breakpointToTextSize)("size3",r),color:s?n:l,value:i,onChange:this.handleChange},w.a.createElement("option",{value:""},o),a.map(function(e,t){return w.a.createElement("option",{key:t,value:e},e)})),w.a.createElement(Zo,{color:n}))}}]),t}(C.Component);Jo.defaultProps={color:X.__OVERRIDE_THIS_COLOR,blockRef:""},Jo.propTypes={blockRef:E.a.string,onCommitAnswer:E.a.func,onStageAnswer:E.a.func,color:E.a.string,choices:E.a.array,placeholder:E.a.string,breakpoint:E.a.string};var $o=Jo,er=n(39);function tr(){var e=k()(["\n  outline: none;\n"]);return tr=function(){return e},e}var nr=-1,or=S.default.div(tr()),rr=function(e){function t(e){var n;return a()(this,t),(n=u()(this,p()(t).call(this,e))).handleMouseEnter=n.handleMouseEnter.bind(f()(n)),n.handleMouseLeave=n.handleMouseLeave.bind(f()(n)),n.handleAnswer=n.handleAnswer.bind(f()(n)),n.handleInputChange=n.handleInputChange.bind(f()(n)),n.handleInputBlur=n.handleInputBlur.bind(f()(n)),n.handleInputClick=n.handleInputClick.bind(f()(n)),n.handleKeyDown=n.handleKeyDown.bind(f()(n)),n.handleIconClick=n.handleIconClick.bind(f()(n)),n.handleWaypointEnter=n.handleWaypointEnter.bind(f()(n)),n.handleWaypointLeave=n.handleWaypointLeave.bind(f()(n)),n.inputId="".concat(n.props.type,"-").concat(n.props.blockRef),n.memoizedFilterOptions=T()(function(e,t){return t},zo.filterOptions),n.state={forceHoverIndex:nr,forceSelectedIndex:nr,forceFocusInput:!1,insideViewport:!1,showList:!1,hovered:!1,filter:""},n}return b()(t,e),l()(t,[{key:"shouldComponentUpdate",value:function(e){return xt(this.props,e)}},{key:"getListHeight",value:function(){if(!Object(er.a)())return 0;var e=this.props.layoutItemsSize,t=e.footerHeight,n=((e.boundingClientRect.height||0)-t)/2-8-0;return Math.max(0,n)}},{key:"handleWaypointEnter",value:function(){var e=this;this.setState({insideViewport:!0}),setTimeout(function(){return e.checkForceFocusInput(e.props.isFocused,e.state.insideViewport)},100)}},{key:"handleWaypointLeave",value:function(){this.setState({insideViewport:!1})}},{key:"handleMouseEnter",value:function(){this.setState({hovered:!0})}},{key:"handleMouseLeave",value:function(){this.setState({hovered:!1})}},{key:"stage",value:function(e){this.props.onStageAnswer(this.props.blockRef,[e])}},{key:"unstage",value:function(){this.setState({forceSelectedIndex:nr}),this.props.onStageAnswer(this.props.blockRef,null)}},{key:"handleAnswer",value:function(e){var t=this,n=this.props.choices[e];this.setState({forceSelectedIndex:e,forceHoverIndex:nr}),n&&setTimeout(function(){t.toggleDropdown(!1),t.stage(n.label),t.setState({filter:n.label}),t.props.onCommitAnswer(t.props.blockRef)},550)}},{key:"handleInputChange",value:function(e){this.unstage();var t=this.memoizedFilterOptions(this.props.choices,e||""),n=null!=e&&t.length>0;this.toggleDropdown(n),this.setState({filter:e||""}),Object(be.a)()&&this.props.recenter(ge)}},{key:"handleInputBlur",value:function(){this.state.hovered||this.toggleDropdown(!1)}},{key:"handleInputClick",value:function(){this.toggleDropdown(!0)}},{key:"toggleDropdown",value:function(e){e!==this.state.showList&&(this.props.onPreventFormScroll(e),e&&this.props.recenter(ge),this.setState({showList:e,forceHoverIndex:e?0:nr}))}},{key:"handleIconClick",value:function(){this.toggleDropdown(!this.state.showList)}},{key:"handleKeyDown",value:function(e){var t=e.keyCode,n=this.getFilteredOptions().length;switch(t){case ke.a.ARDOWN:e.preventDefault(),e.stopPropagation(),this.toggleDropdown(!0),this.setState({forceHoverIndex:Math.min(n-1,this.state.forceHoverIndex+1)});break;case ke.a.ARUP:this.state.showList&&(e.preventDefault(),e.stopPropagation(),this.setState({forceHoverIndex:Math.max(0,this.state.forceHoverIndex-1)}));break;case ke.a.ENTER:if(this.state.showList&&n>0&&this.state.forceHoverIndex!==nr){var o=function(e,t){var n=t.find(function(t,n){return n===e});return n?n.index:null}(this.state.forceHoverIndex,this.memoizedFilterOptions(this.props.choices,this.state.filter));this.handleAnswer(o)}else this.props.validations&&this.props.validations.required&&(this.unstage(),this.props.onCommitAnswer(this.props.blockRef),this.setState({showList:!1,filter:""}))}}},{key:"checkForceFocusInput",value:function(e,t){e&&t&&(Object(be.a)()||this.setState({forceFocusInput:!0}))}},{key:"componentWillReceiveProps",value:function(e){var t=e.isActive,n=e.shouldClearInput,o=e.isFocused;t&&o&&!this.props.isFocused&&this.checkForceFocusInput(o,this.state.insideViewport),!t&&this.state.showList&&this.toggleDropdown(!1),n&&this.setState({filter:""})}},{key:"componentDidMount",value:function(){this.props.isActive&&this.checkForceFocusInput(this.props.isFocused,this.state.insideViewport)}},{key:"getAnswerValue",value:function(){var e=this.props.value;return e&&e.length>0?e[0]:void 0}},{key:"getFilteredOptions",value:function(){return this.memoizedFilterOptions(this.props.choices,this.state.filter)}},{key:"componentDidUpdate",value:function(){this.state.forceFocusInput&&this.setState({forceFocusInput:!1})}},{key:"render",value:function(){var e=this.props,t=e.choices,n=e.title,o=e.placeholder,r=e.theme,i=e.isFocused,a=e.t,s=e.onStageAnswer,l=e.onCommitAnswer,c=e.blockRef,u=e.breakpoint,h=0===this.getFilteredOptions().length,p=!0===this.state.showList;return w.a.createElement(bt,B()({},this.props,{title:{text:n,for:this.inputId,type:"label"},hideError:p,customError:h?"block.dropdown.hint":null}),Object(be.a)()?w.a.createElement(M.a,{top:4},w.a.createElement($o,{breakpoint:u,blockRef:c,choices:t,color:r.colors.secondary,placeholder:a("block.dropdown.placeholderTouch"),onStageAnswer:s,onCommitAnswer:l})):w.a.createElement(Mo.a,{onEnter:this.handleWaypointEnter,onLeave:this.handleWaypointLeave},w.a.createElement(M.a,{top:4,bottom:2},w.a.createElement(or,{tabIndex:"-1",onKeyDown:this.handleKeyDown,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,"data-qa":"focusable"},w.a.createElement(_o.a,{placeholder:a(o),options:t.map(function(e){return e.label}),color:r.colors.secondary,contextBackgroundColor:r.colors.background,filterValue:this.state.filter,hoveredIndex:this.state.forceHoverIndex,selectedIndex:this.state.forceSelectedIndex,onFilterChange:this.handleInputChange,onInputClick:this.handleInputClick,onArrowClick:this.handleIconClick,onOptionClick:this.handleAnswer,onInputBlur:this.handleInputBlur,optionsMaxHeight:"".concat(this.getListHeight(),"px"),optionsOpen:this.state.showList,forceFocus:i&&this.state.forceFocusInput})))))}}]),t}(C.Component);rr.propTypes={choices:E.a.array,blockRef:E.a.string,index:E.a.number,title:E.a.string,placeholder:E.a.string,t:E.a.func,onStageAnswer:E.a.func,onCommitAnswer:E.a.func,recenter:E.a.func,isActive:E.a.bool,isFocused:E.a.bool,onPreventFormScroll:E.a.func,layoutItemsSize:E.a.shape({footerHeight:E.a.number,boundingClientRect:E.a.shape({height:E.a.number})}),validations:E.a.shape({required:E.a.bool}),shouldClearInput:E.a.bool,theme:E.a.object,value:E.a.array},rr.defaultProps={recenter:St.a,onCommitAnswer:St.a,onStageAnswer:St.a,t:function(e){return e},onPreventFormScroll:St.a,theme:{colors:{secondary:X.__OVERRIDE_THIS_COLOR,background:X.__OVERRIDE_THIS_COLOR}}};var ir=Object(_t.withBreakpoint)(rr),ar=n(653),sr=n.n(ar);var lr=function(e){function t(e){var n;return a()(this,t),(n=u()(this,p()(t).call(this,e))).state={isKeyboardHovered:!1,hoveredAmount:-1},n.numberBuffer=[],n.numberTimeout=null,n.handleClick=n.handleClick.bind(f()(n)),n.handleKeyDown=n.handleKeyDown.bind(f()(n)),n}return b()(t,e),l()(t,[{key:"shouldComponentUpdate",value:function(e){return xt(this.props,e)}},{key:"componentDidUpdate",value:function(e){e.isFocused&&!this.props.isFocused&&this.setState({isKeyboardHovered:!1})}},{key:"clearNumberTimeout",value:function(){clearTimeout(this.numberTimeout),this.numberTimeout=null}},{key:"handleKeyDown",value:function(e){var t=this,n=this.props,o=n.blockRef,r=n.min,i=n.max,a=n.onCommitAnswer,s=n.unstageOnKeyDown,l=e.keyCode;if(!function(e){return ke.a.NUM_0<=e&&e<=ke.a.NUM_9||ke.a.NUMPAD_0<=e&&e<=ke.a.NUMPAD_9}(l)?this.clearNumberTimeout():(null===this.numberTimeout&&(this.numberBuffer=[],this.numberTimeout=setTimeout(function(){t.stage(function(e){return e.reduce(function(e,t,n){return e+t*Math.pow(10,n)},0)}(t.numberBuffer))},200)),this.numberBuffer.unshift(function(e){return e-(e>=ke.a.NUMPAD_0?ke.a.NUMPAD_0:ke.a.NUM_0)}(l))),l===ke.a.ENTER&&(this.state.isKeyboardHovered?this.stage(this.state.hoveredAmount):a(o)),l===ke.a.ARRIGHT){var c=this.getSelectedAmount();null==c||this.state.isKeyboardHovered?this.state.isKeyboardHovered?this.setState({hoveredAmount:Math.min(i,this.state.hoveredAmount+1)}):this.setState({isKeyboardHovered:!0,hoveredAmount:r}):(this.setState({isKeyboardHovered:!0,hoveredAmount:Math.min(i,c+1)}),s&&this.unstage())}if(l===ke.a.ARLEFT){var u=this.getSelectedAmount();null==u||this.state.isKeyboardHovered?this.state.isKeyboardHovered&&this.setState({hoveredAmount:Math.max(r,this.state.hoveredAmount-1)}):(this.setState({isKeyboardHovered:!0,hoveredAmount:Math.max(r,u-1)}),s&&this.unstage())}}},{key:"handleClick",value:function(e){this.stage(e)}},{key:"unstage",value:function(){this.props.onStageAnswer(this.props.blockRef,[]),this.clearNumberTimeout()}},{key:"stage",value:function(e){var t=this;this.clearNumberTimeout(),e<this.props.min||e>this.props.max||(this.getSelectedAmount()!==e?(this.props.onStageAnswer(this.props.blockRef,[e]),setTimeout(function(){t.props.onCommitAnswer(t.props.blockRef)},550)):this.unstage())}},{key:"getSelectedAmount",value:function(){var e=this.props.value;return e&&e.length>0?e[0]:void 0}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.isFocused,o=e.title,r=this.state,i=r.hoveredAmount,a=r.isKeyboardHovered,s=this.getSelectedAmount(),l=A()({},this.props,{title:{text:o,type:"legend"},useFieldset:!0});return w.a.createElement(bt,l,w.a.createElement(So,{shouldFocus:n,layoutItemsSize:this.props.layoutItemsSize,onKeyDown:this.handleKeyDown},w.a.createElement(M.a,{top:4,bottom:3},t({hoveredAmount:a?i:-1,isKeyboardHovered:a,onClick:this.handleClick,selectedAmount:s}))))}}]),t}(C.Component);lr.propTypes={blockRef:E.a.string,children:E.a.func,isFocused:E.a.bool,max:E.a.number,min:E.a.number,onCommitAnswer:E.a.func,onStageAnswer:E.a.func,title:E.a.string,unstageOnKeyDown:E.a.bool,value:E.a.array};var cr=lr;var ur=function(e){function t(){return a()(this,t),u()(this,p()(t).apply(this,arguments))}return b()(t,e),l()(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.blockIndex,n=e.blockRef,o=e.onCommitAnswer,r=e.onStageAnswer;if(0===t){var i=function(){if(!window||!window.location)return null;var e=window.location.search.match(/prefilled_answer=[0-9]+/);return e?parseInt(e[0].split("=")[1],10):null}();null!=i&&setTimeout(function(){r(n,[i]),setTimeout(function(){o(n)},550)},2e3)}}},{key:"render",value:function(){var e=this.props,t=e.labels,n=e.startAtOne,o=e.steps,r=e.theme,i=j()(e,["labels","startAtOne","steps","theme"]),a=n?1:0,s=a+o-1;return w.a.createElement(cr,B()({max:s,min:a,theme:r},i),function(e){var n=e.hoveredAmount,o=e.isKeyboardHovered,i=e.onClick,l=e.selectedAmount;return w.a.createElement(sr.a,{color:r.colors.secondary,hoveredAmount:n,isKeyboardHovered:o,labelLeft:t.left,labelCenter:t.center,labelRight:t.right,max:s,min:a,onClick:i,selectedAmount:l})})}}]),t}(C.Component);ur.defaultProps={labels:{},onCommitAnswer:function(){},onStageAnswer:function(){},theme:{colors:{secondary:X.__OVERRIDE_THIS_COLOR}}},ur.propTypes={blockIndex:E.a.number,blockRef:E.a.string,isFocused:E.a.bool,labels:E.a.shape({left:E.a.string,center:E.a.string,right:E.a.string}),onCommitAnswer:E.a.func,onStageAnswer:E.a.func,startAtOne:E.a.bool,steps:E.a.number,theme:E.a.object,title:E.a.string,value:E.a.array};var hr=ur;function pr(){var e=k()(["\n  ",";\n  margin-top: ","px;\n  width: 100%;\n  outline: none;\n  &:focus {\n    outline: none;\n  }\n"]);return pr=function(){return e},e}var dr=S.default.div(pr(),function(e){return e.isActive?"":"pointer-events: none;"},4*je.unit);dr.displayName="ButtonWrapper";var fr=function(e){function t(){var e,n;a()(this,t);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(n=u()(this,(e=p()(t)).call.apply(e,[this].concat(r)))).handleCommit=n.handleCommit.bind(f()(n)),n.handleKeyDown=n.handleKeyDown.bind(f()(n)),n}return b()(t,e),l()(t,[{key:"shouldComponentUpdate",value:function(e){return xt(this.props,e)}},{key:"componentDidMount",value:function(){var e=this;this.focusButton(),this.props.handleAppScroll(function(){e.props.isActive&&e.focusButton()})}},{key:"componentDidUpdate",value:function(){this.focusButton()}},{key:"handleKeyDown",value:function(e){e.keyCode===ke.a.ENTER&&this.props.onCommitAnswer(this.props.blockRef)}},{key:"handleCommit",value:function(e){e.stopPropagation(),this.props.isActive&&this.props.onCommitAnswer(this.props.blockRef)}},{key:"focusButton",value:function(){this.button&&this.props.isFocused&&Q(this.button,this.props.layoutItemsSize)&&this.button.focus()}},{key:"render",value:function(){var e=this,t=this.props,n=t.blockRef,o=t.buttonText,r=t.children,i=t.isActive,a=t.showButton,s=t.t;return w.a.createElement(bt,this.props,r,a&&w.a.createElement(dr,{innerRef:function(t){e.button=t},onKeyDown:this.handleKeyDown,isActive:i,tabIndex:"-1"},w.a.createElement(ae,{blockRef:n,label:s(o),onClick:this.handleCommit,isAnimated:!1,isVisible:!0,hideIcon:!0})))}}]),t}(C.Component);fr.defaultProps={onCommitAnswer:function(){},t:function(e){return e}},fr.propTypes={buttonText:E.a.string,children:E.a.any,blockRef:E.a.string,index:E.a.number,isActive:E.a.bool,isFocused:E.a.bool,onCommitAnswer:E.a.func,showButton:E.a.bool,t:E.a.func,handleAppScroll:E.a.func,layoutItemsSize:E.a.shape({footerHeight:E.a.number})};var mr=function(e){return w.a.createElement(fr,B()({},e,{showButton:!0,titleCounterIcon:e.hideMarks?null:"quote"}))},br=n(651),vr=n.n(br),gr=function(e){function t(){return a()(this,t),u()(this,p()(t).apply(this,arguments))}return b()(t,e),l()(t,[{key:"render",value:function(){var e=this.props,t=e.shape,n=e.steps,o=e.theme,r=j()(e,["shape","steps","theme"]),i=n;return w.a.createElement(cr,B()({max:i,min:1,theme:o},r,{unstageOnKeyDown:!0}),function(e){var n=e.hoveredAmount,r=e.isKeyboardHovered,a=e.onClick,s=e.selectedAmount;return w.a.createElement(vr.a,{color:o.colors.secondary,hoveredAmount:n,iconName:t,isKeyboardHovered:r,max:i,min:1,onClick:a,selectedAmount:s})})}}]),t}(C.Component);gr.defaultProps={onCommitAnswer:function(){},onStageAnswer:function(){},shape:"circle",theme:{colors:{secondary:X.__OVERRIDE_THIS_COLOR}}},gr.propTypes={blockRef:E.a.string,isFocused:E.a.bool,onCommitAnswer:E.a.func,onStageAnswer:E.a.func,shape:E.a.string,steps:E.a.number,theme:E.a.object,title:E.a.string,value:E.a.array};var yr=gr;function kr(){var e=k()(["\n  display: flex;\n  margin-top: 25px;\n  max-width: 750px;\n  padding: 15px;\n  border-style: solid;\n  border-width: 1px;\n  border-radius: 3px;\n  color: ",";\n  background-color: ",";\n  border-color: ",";\n  -webkit-font-smoothing: antialiased;\n"]);return kr=function(){return e},e}var Cr=S.default.div(kr(),function(e){return e.color},function(e){return Object(X.alphaToColor)(e.color,.05)},function(e){return Object(X.xtransparent)(e.color)}),wr=function(e){var t=e.theme,n=e.t,o=e.type,r=j()(e,["theme","t","type"]);return w.a.createElement(bt,B()({theme:t},r),w.a.createElement(Cr,{color:t.colors.secondary},w.a.createElement("label",null,Object(Z.a)(n("block.unsupported.message",{type:n("block.types.".concat(o))})))))};wr.defaultProps={t:function(e){return e},theme:{colors:{secondary:X.__OVERRIDE_THIS_COLOR}}},wr.propTypes={description:E.a.string,index:E.a.number,isActive:E.a.bool,isFirst:E.a.bool,listIndexText:E.a.string,t:E.a.func,theme:E.a.object,title:E.a.string,type:E.a.string};var Sr=wr,xr=function(e){var t={true:"".concat(e.blockRef,"-yes"),false:"".concat(e.blockRef,"-no")},n=[{ref:t[!0],value:!0,label:"label.yes.default",keyboardShortcut:"label.yes.shortcut"},{ref:t[!1],value:!1,label:"label.no.default",keyboardShortcut:"label.no.shortcut"}],o=Array.isArray(e.value)?e.value[0]:e.value;return w.a.createElement(No,B()({choices:n},e,{value:[t[o]],onStageAnswer:function(t,o){var r=bn()(o,1)[0],i=n.find(function(e){return e.ref===r}),a=[{value:i&&i.value,label:i&&e.t(i.label)}];e.onStageAnswer(e.blockRef,i?a:[])},keyboardShortcutType:"custom",verticalAlignment:!0}))};xr.defaultProps={onCommitAnswer:St.a,onStageAnswer:St.a,t:function(e){return e},theme:{colors:{secondary:X.__OVERRIDE_THIS_COLOR,background:X.__OVERRIDE_THIS_COLOR}}},xr.propTypes={title:E.a.string,isActive:E.a.bool,isFocused:E.a.bool,blockRef:E.a.string,onStageAnswer:E.a.func,onCommitAnswer:E.a.func,handleAppScroll:E.a.func,t:E.a.func,value:E.a.array,theme:E.a.object,layoutItemsSize:E.a.object};var Er=xr,Or=function(e){var t={true:"".concat(e.blockRef,"-accept"),false:"".concat(e.blockRef,"-reject")},n=[{ref:t[!0],value:!0,label:"block.legal.accept"},{ref:t[!1],value:!1,label:"block.legal.reject"}],o=Array.isArray(e.value)?e.value[0]:e.value;return w.a.createElement(No,B()({choices:n},e,{value:[t[o]],onStageAnswer:function(t,o){var r=bn()(o,1)[0],i=n.find(function(e){return e.ref===r}),a=[{value:i&&i.value,label:i&&e.t(i.label)}];e.onStageAnswer(e.blockRef,i?a:[])},keyboardShortcutType:"letter",verticalAlignment:!0}))};Or.defaultProps={onCommitAnswer:St.a,onStageAnswer:St.a,t:function(e){return e},theme:{colors:{secondary:"#FF00FF",background:"#FFFFFF"}}},Or.propTypes={title:E.a.string,isActive:E.a.bool,isFocused:E.a.bool,blockRef:E.a.string,onStageAnswer:E.a.func,onCommitAnswer:E.a.func,handleAppScroll:E.a.func,t:E.a.func,value:E.a.array,theme:E.a.object,layoutItemsSize:E.a.object};var Rr=Or,Ar=function(e){function t(){var e,n;a()(this,t);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(n=u()(this,(e=p()(t)).call.apply(e,[this].concat(r)))).handleCommit=n.handleCommit.bind(f()(n)),n.handleChange=n.handleChange.bind(f()(n)),n.handleFocus=n.handleFocus.bind(f()(n)),n.handleKeyDown=n.handleKeyDown.bind(f()(n)),n.handleKeyPress=n.handleKeyPress.bind(f()(n)),n.inputId="".concat(n.props.type,"-").concat(n.props.blockRef),n.state={isShaking:!1},n}return b()(t,e),l()(t,[{key:"shouldComponentUpdate",value:function(e){return xt(this.props,e)}},{key:"shake",value:function(){var e=this;this.setState({isShaking:!0}),clearTimeout(this.shakeStopTimeout),this.shakeStopTimeout=setTimeout(function(){return e.setState({isShaking:!1})},600)}},{key:"isInputFocused",value:function(){return!!document&&document.activeElement===this.textInput}},{key:"handleCommit",value:function(e){var t=this,n=this.isInputFocused()&&Object(X.isTouch)();this.textInput&&n&&this.textInput.blur(),e.stopPropagation(),setTimeout(function(){t.props.isActive&&t.props.onCommitAnswer(t.props.blockRef)},n?700:0)}},{key:"handleFocus",value:function(){var e=this;Object(X.isTouch)()&&(this.props.onInputFocus(),Object(wt.a)()||setTimeout(function(){e.props.recenter(ge)},700))}},{key:"handleKeyPress",value:function(e){kt(this.props.type,this.props.validations,e).blocked&&this.shake()}},{key:"handleKeyDown",value:function(e){var t=this;Ct(this.props.type,e),e.nativeEvent.keyCode===ke.a.ENTER&&(Object(X.isTouch)()&&(this.textInput&&this.textInput.blur(),e.stopPropagation()),setTimeout(function(){t.props.onCommitAnswer(t.props.blockRef)},Object(X.isTouch)()?700:0))}},{key:"handleChange",value:function(e){var t=e.target.value;this.props.onStageAnswer(this.props.blockRef,t.slice(0,this.props.maxLength))}},{key:"updateInputFocus",value:function(e,t,n){this.props.canUpdateFocus&&(t?!Object(X.isTouch)()&&Q(e,this.props.layoutItemsSize)&&e.focus():n&&e.blur())}},{key:"componentDidMount",value:function(){var e=this;this.updateInputFocus(this.textInput,this.props.isActive),this.props.handleAppScroll(function(){e.props.isActive&&e.updateInputFocus(e.textInput,e.props.isActive)})}},{key:"componentDidUpdate",value:function(e){this.updateInputFocus(this.textInput,this.props.isActive,e.isActive)}},{key:"render",value:function(){var e=this,t=this.props,n=t.blockRef,o=t.layoutItemsSize,r=t.isCommitButtonVisible,i=t.placeholder,a=t.maxLength,s=t.title,l=t.theme,c=t.inputType,u=t.t,h=A()({},this.props,{title:{text:s,for:this.inputId,type:"label"}}),p=Array.isArray(this.props.value)?this.props.value[0]:this.props.value;return w.a.createElement(bt,B()({isShaking:this.state.isShaking},h),w.a.createElement(M.a,{top:4,bottom:2},w.a.createElement(At.a,{getRef:function(t){e.textInput=t},placeholder:u(i),onKeyDown:this.handleKeyDown,onKeyPress:this.handleKeyPress,onChange:this.handleChange,onFocus:this.handleFocus,onBlur:this.props.onInputBlur,maxLength:a,inputId:this.inputId,value:p.toString(),color:l.colors.secondary,type:c})),w.a.createElement(ae,{blockRef:n,isVisible:r,layoutItemsSize:o,onClick:this.handleCommit,useStickyFooter:!0}))}}]),t}(C.Component);Ar.defaultProps={handleAppScroll:St.a,onCommitAnswer:St.a,onStageAnswer:St.a,value:"",t:St.a,theme:{colors:{secondary:X.__OVERRIDE_THIS_COLOR}}},Ar.propTypes={blockRef:E.a.string,index:E.a.number,isActive:E.a.bool,isCommitButtonVisible:E.a.bool,canUpdateFocus:E.a.bool,onCommitAnswer:E.a.func,onStageAnswer:E.a.func,placeholder:E.a.string,title:E.a.string,type:E.a.string,validations:E.a.object,handleAppScroll:E.a.func,recenter:E.a.func,layoutItemsSize:E.a.shape({footerHeight:E.a.number}),maxLength:E.a.number,theme:E.a.object,value:E.a.oneOfType([E.a.arrayOf(E.a.any),E.a.string]),t:E.a.func};var Ir=Ar,Tr=function(e){return w.a.createElement(Ir,B()({},e,{onCommitAnswer:function(){e.value&&Array.isArray(e.value)&&e.onStageAnswer(e.blockRef,e.value[0].trim()),e.onCommitAnswer(e.blockRef)}}))},Fr=/\D+/g,jr=function(e){return w.a.createElement(Ir,B()({},e,{onStageAnswer:function(t,n){n=parseInt(n.replace(Fr,""),10),e.onStageAnswer(e.blockRef,n)},maxLength:18,inputType:"tel"}))},Dr=n(630),Br=n(629),Nr=n(561);function Pr(){var e=k()(["\n  margin-right: 8px;\n\n  svg {\n    box-shadow: 0 0 0 1px\n      ",";\n    border-radius: 4px;\n    box-sizing: content-box;\n    background-color: #fff;\n  }\n"]);return Pr=function(){return e},e}var Lr=Object(S.default)(kn.a)(Pr(),function(e){return Object(X.isColorLight)(e.color)?Object(X.xtransparent)("#000"):Object(X.xtransparent)("#FFF")}),Hr=n(58),Vr=!Hr.a.production&&window&&window.location&&window.location.search.includes("disable-animations=true");function Mr(){var e=k()(["\n  display: flex;\n  height: 100%;\n  flex: 1;\n  justify-content: space-between;\n  align-items: center;\n"]);return Mr=function(){return e},e}function zr(){var e=k()(["\n  width: 100%;\n  display: flex;\n  height: 100%;\n  align-items: center;\n  padding: 8px;\n  height: ","px;\n"]);return zr=function(){return e},e}function Kr(){var e=k()(["\n  position: absolute;\n  top: -8px;\n  width: 450px;\n  height: 300px;\n  overflow: hidden;\n  z-index: ",";\n  ",";\n"]);return Kr=function(){return e},e}function _r(){var e=k()(["\n  position: absolute;\n  z-index: ",";\n  ",";\n"]);return _r=function(){return e},e}var Ur=-1,Wr=1e3,Yr=S.default.div(_r(),je.zLevels.level5,function(e){return e.isVisible?"":"pointer-events: none"}),Gr=S.default.div(Kr(),je.zLevels.level5,function(e){return e.isVisible?"":"pointer-events: none"});Gr.displayName="DesktopWrapper";var qr=S.default.div(zr(),Object(be.a)()?44:40),Xr=S.default.div(Mr()),Qr=T()(function(e){return e},function(e,t){return Object(zo.filterOptions)(t,e,"name").map(function(t){return A()({},t,{name:Object(zo.highlightFilteredOption)(t.name,e)})})}),Zr=function(e,t,n,o,r){return function(i){var a=i.code,s=i.name,l=i.prefix,c=i.svg;return w.a.createElement(M.a,{bottom:.5,left:n,right:n},w.a.createElement(Jn.a,{fullHeight:!0},function(n){var i=n.hovered;return w.a.createElement(Nr.ChoiceBox,{color:t,hovered:i||a===r||a===o,selected:a===o},w.a.createElement(qr,null,w.a.createElement(Lr,{color:e,svg:c}),w.a.createElement(Xr,null,w.a.createElement(H.a,{color:t,inline:!0,responsive:!0,size:"size0"},Object(Z.a)(s)),w.a.createElement(H.a,{color:t,inline:!0,responsive:!0,size:"size0"},"+".concat(l)))))}))}},Jr=function(e){function t(e){var n;return a()(this,t),n=u()(this,p()(t).call(this,e)),g()(f()(n),"handleKeyDown",function(e){var t=e.keyCode,o=n.props,r=o.data,i=o.filterText,a=n.state.hoverIndex,s=Qr(i,r),l=s.length;switch(t){case ke.a.ARDOWN:e.preventDefault(),e.stopPropagation(),n.setState({hoverIndex:Math.min(l-1,a+1)});break;case ke.a.ARUP:e.preventDefault(),e.stopPropagation(),n.setState({hoverIndex:Math.max(0,a-1)});break;case ke.a.TAB:case ke.a.ESCAPE:e.preventDefault(),e.stopPropagation(),n.props.onClose();break;case ke.a.ENTER:a===Ur?l>0&&""!==i?n.handleSelection(s[0]):n.props.onClose():l>0&&n.handleSelection(s[a])}}),g()(f()(n),"handleFilterChange",function(e){n.resetHoverIndex(),n.props.onFilterChange(e)}),g()(f()(n),"handleSelection",function(e){n.props.onSelect(e),setTimeout(function(){n.props.onClose()},Wr)}),n.state={hoverIndex:Ur},n}return b()(t,e),l()(t,[{key:"componentDidUpdate",value:function(e){!e.isOpen&&this.props.isOpen&&this.resetHoverIndex()}},{key:"resetHoverIndex",value:function(){this.setState({hoverIndex:Ur})}},{key:"render",value:function(){var e=this.props,t=e.data,n=e.filterText,o=e.isOpen,r=e.onClose,i=e.color,a=e.language,s=e.backgroundColor,l=e.innerRef,c=e.onFilterChange,u=e.value,h=e.fontFamily,p=e.t,d=p("block.countryDropdown.searchCountries"),f=p("block.countryDropdown.hint"),m=Qr(n,t),b=this.state.hoverIndex,v=m.length&&m[b]?m[b].code:"";return Object(be.a)()?w.a.createElement(Yr,{innerRef:l,isVisible:o},w.a.createElement(Br.FullscreenSelect,{backgroundColor:s,color:i,filterTextPlaceholder:d,filterText:n,noResultsMessage:f,onFilterChange:c,optionRender:Zr(s,i,1,u),optionHeight:48,options:m,isVisible:o,keyProp:"code",onClose:r,onSelect:this.handleSelection,language:a,fontFamily:h,dataQa:"country-fullscreen-select",disableAnimations:Vr})):w.a.createElement(U.a,{isVisible:o,type:"slideUp"},w.a.createElement(Gr,{innerRef:l,isVisible:o,onKeyDown:this.handleKeyDown},w.a.createElement(Br.DropdownSelect,{backgroundColor:s,color:i,filterTextPlaceholder:d,filterText:n,noResultsMessage:f,onFilterChange:this.handleFilterChange,optionRender:Zr(s,i,2,u,v),optionHeight:44,options:m,isVisible:o,keyProp:"code",onClose:r,onSelect:this.handleSelection,language:a,dataQa:"country-dropdown-select"})))}}]),t}(C.PureComponent);Jr.propTypes={backgroundColor:E.a.string,color:E.a.string,data:E.a.array,filterText:E.a.string,fontFamily:E.a.string,innerRef:E.a.object,isOpen:E.a.bool,language:E.a.string,onClose:E.a.func,onFilterChange:E.a.func,onSelect:E.a.func,value:E.a.string,t:E.a.func},Jr.defaultProps={backgroundColor:X.__OVERRIDE_THIS_COLOR,color:X.__OVERRIDE_THIS_COLOR,data:[],filterText:"",fontFamily:je.fontSans,onClose:St.a,onFilterChange:St.a,onSelect:St.a,t:St.a};var $r=Object(J.a)(Jr);function ei(){var e=k()(["\n  box-shadow: 0px 1px ",";\n  ",";\n  opacity: ",";\n  cursor: pointer;\n  padding-bottom: 16px;\n"]);return ei=function(){return e},e}var ti=Object(S.default)(qn.a)(ei(),function(e){return Object(X.xxtransparent)(e.color)},function(e){return e.isVisible?"pointer-events: none;":""},function(e){return e.isVisible?"0":"1"}),ni=function(e,t,n){return e.map(function(e){return A()({},e,{name:n(e.code,t)})}).sort(function(e,t){return e.name.localeCompare(t.name)})},oi=function(e){function t(){var e,n;a()(this,t);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return n=u()(this,(e=p()(t)).call.apply(e,[this].concat(r))),g()(f()(n),"state",{filterText:"",sortedData:[],countryNameTranslator:function(e){return e}}),g()(f()(n),"dropdownRef",w.a.createRef()),g()(f()(n),"handleDocumentClick",function(e){n.isClickFromDropdown(n.dropdownRef.current,e.target)||!Object(be.a)()&&n.enableClickClose&&n.props.onClose()}),g()(f()(n),"handleFilterTextChange",function(e){n.setState({filterText:e})}),g()(f()(n),"isClickFromDropdown",function(e,t){var n=t;do{if(n===e)return!0;n=n.parentElement}while(null!==n);return!1}),g()(f()(n),"handleSelect",function(e){return n.props.onChange(e.code)}),n}return b()(t,e),l()(t,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("click",this.handleDocumentClick),n.e(6).then(n.bind(null,709)).then(function(t){var n=t.countryData,o=t.countryNameTranslator;e.setState({countryNameTranslator:o,sortedData:ni(n,e.props.language,o)})}).catch(function(e){console.error("Error fetching country information: ",e)})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("click",this.handleDocumentClick)}},{key:"componentDidUpdate",value:function(e){var t=this;this.props.isOpen&&!e.isOpen?setTimeout(function(){t.enableClickClose=!0},200):!this.props.isOpen&&e.isOpen&&(this.enableClickClose=!1,this.setState({filterText:""})),this.props.language!==e.language&&this.setState({sortedData:ni(this.state.sortedData,this.props.language,this.state.countryNameTranslator)})}},{key:"render",value:function(){var e=this.state,t=e.filterText,n=e.sortedData,o=this.props,r=o.value,i=o.isOpen,a=o.onOpen,s=o.onClose,l=o.color,c=o.language,u=o.backgroundColor,h=o.fontFamily,p=n.find(function(e){return e.code===r});return p?w.a.createElement(C.Fragment,null,w.a.createElement($r,{autoComplete:"tel-national",data:n,filterText:t,isOpen:i,onClose:s,color:l,language:c,backgroundColor:u,innerRef:this.dropdownRef,onFilterChange:this.handleFilterTextChange,onSelect:this.handleSelect,value:p.code,fontFamily:h}),w.a.createElement(ti,{"data-qa":"trigger-button",onClick:a,isVisible:i,color:l,align:"center"},w.a.createElement(Lr,{color:u,svg:p.svg}),w.a.createElement(kn.a,{svg:Wo.a,color:l}))):null}}]),t}(C.Component),ri=n(570);function ii(){var e=k()(["\n  position: relative;\n  z-index: ",";\n"]);return ii=function(){return e},e}function ai(){var e=k()(["\n  display: flex;\n  align-items: flex-end;\n  max-width: 450px;\n"]);return ai=function(){return e},e}var si=700,li=15,ci=/^[A-Za-z]+$/,ui=/[^0-9a-zA-Z]+/gi,hi=Object(S.default)(M.a)(ai()),pi=Object(S.default)(M.a)(ii(),je.zLevels.level1),di=function(e){function t(){var e,n;a()(this,t);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return n=u()(this,(e=p()(t)).call.apply(e,[this].concat(r))),g()(f()(n),"state",{isOpen:!1,isShaking:!1,getExampleNumber:null}),g()(f()(n),"getPlaceholder",function(e){return n.state.getExampleNumber?n.state.getExampleNumber(e,Dr).formatNational():""}),g()(f()(n),"handleKeyPress",function(e){if(String.fromCharCode(e.charCode).match(ci))return e.preventDefault(),void n.shake();var t=n.getValue(n.props).countryCode;Object(ri.c)(t,e.target.value).replace(ui,"").length>li&&(e.preventDefault(),n.shake())}),g()(f()(n),"handleKeyDown",function(e){e.nativeEvent.keyCode===ke.a.ENTER&&(Object(be.a)()&&(n.textInput&&n.textInput.blur(),e.stopPropagation()),setTimeout(function(){n.props.onCommitAnswer(n.props.blockRef)},Object(be.a)()?si:0))}),g()(f()(n),"handleValueChange",function(e){var t=e.target.value,o=n.getValue(n.props),r=o.number,i=o.countryCode,a=n.guessCountryBasedOnNumber(t)||i,s=a!==i;n.AsYouType&&s&&n.createCountryFormatter(a),n.parseDigits(t)!==n.parseDigits(r)&&(t=n.formatPhoneNumber(t)),n.props.onStageAnswer(n.props.blockRef,{number:t,countryCode:a})}),g()(f()(n),"handleCountryChange",function(e){if(e!==n.getValue(n.props).countryCode){n.AsYouType&&n.createCountryFormatter(e);var t=n.formatPhoneNumber(n.getValue(n.props).number);n.props.onStageAnswer(n.props.blockRef,{number:t,countryCode:e})}}),g()(f()(n),"handleDropdownOpen",function(){n.props.recenter(ge),n.props.onPreventFormScroll(!0),n.setState({isOpen:!0})}),g()(f()(n),"handleDropdownClose",function(){n.props.onPreventFormScroll(!1),n.setState({isOpen:!1}),Object(be.a)()||n.textInput.focus()}),g()(f()(n),"getValue",function(e){return e.value[0]}),g()(f()(n),"handleCommit",function(e){var t=n.isInputFocused()&&Object(be.a)();n.textInput&&t&&n.textInput.blur(),e.stopPropagation(),setTimeout(function(){n.props.isActive&&n.props.onCommitAnswer(n.props.blockRef)},t?si:0)}),n}return b()(t,e),l()(t,[{key:"componentDidMount",value:function(){var e=this;n.e(0).then(n.bind(null,249)).then(function(t){var n=t.AsYouType,o=t.parseDigits,r=t.getExampleNumber;e.AsYouType=n,e.formatter=new n(e.getValue(e.props).countryCode),e.parseDigits=o,e.setState({getExampleNumber:r})}).catch(function(e){console.error("Error fetching phone library: ",e)}),this.updateInputFocus(this.textInput,this.props.isActive),this.props.handleAppScroll(function(){e.props.isActive&&e.updateInputFocus(e.textInput,e.props.isActive)})}},{key:"componentDidUpdate",value:function(e){var t=this.getValue(e).countryCode,n=this.getValue(this.props).countryCode;this.AsYouType&&t!==n&&this.createCountryFormatter(n),this.updateInputFocus(this.textInput,this.props.isActive,e.isActive)}},{key:"updateInputFocus",value:function(e,t,n){this.props.canUpdateFocus&&!this.state.isOpen&&(t?!Object(be.a)()&&Q(e,this.props.layoutItemsSize)&&e.focus():n&&e.blur())}},{key:"createCountryFormatter",value:function(e){this.formatter=new this.AsYouType(e)}},{key:"formatPhoneNumber",value:function(e){return this.parseDigits&&(e=this.formatter.input(e),this.formatter.reset()),e}},{key:"guessCountryBasedOnNumber",value:function(e){this.formatter.input(e);var t=this.formatter.country||this.formatter.metadata._country;return this.formatter.reset(),t}},{key:"shake",value:function(){var e=this;this.setState({isShaking:!0}),clearTimeout(this.shakeStopTimeout),this.shakeStopTimeout=setTimeout(function(){return e.setState({isShaking:!1})},600)}},{key:"isInputFocused",value:function(){return!!document&&document.activeElement===this.textInput}},{key:"render",value:function(){var e=this,t=this.props,n=t.blockRef,o=t.isCommitButtonVisible,r=t.language,i=t.layoutItemsSize,a=t.theme,s=t.title,l=this.state.isOpen,c=this.getValue(this.props),u=A()({},this.props,{title:{text:s,type:"label"}});return w.a.createElement(bt,B()({isShaking:this.state.isShaking},u),w.a.createElement(hi,{top:4,bottom:2},w.a.createElement(pi,{right:2},w.a.createElement(oi,{backgroundColor:a.colors.background,color:a.colors.secondary,isOpen:l,language:r,onClose:this.handleDropdownClose,onOpen:this.handleDropdownOpen,value:c.countryCode,onChange:this.handleCountryChange,fontFamily:a.font})),w.a.createElement(At.a,{getRef:function(t){e.textInput=t},inputId:"phone-number-".concat(n),color:a.colors.secondary,value:c.number,placeholder:this.getPlaceholder(c.countryCode),onChange:this.handleValueChange,onKeyDown:this.handleKeyDown,onKeyPress:this.handleKeyPress,onFocus:this.props.onInputFocus,onBlur:this.props.onInputBlur,type:"tel",autoComplete:"tel-national",dataQa:"phone-number-input",showBorder:!0})),w.a.createElement(ae,{blockRef:n,isVisible:o,layoutItemsSize:i,onClick:this.handleCommit,useStickyFooter:!0}))}}]),t}(C.Component);g()(di,"propTypes",{theme:E.a.object}),g()(di,"defaultProps",{value:[{number:"",countryCode:"US"}],theme:{colors:{secondary:X.__OVERRIDE_THIS_COLOR,background:X.__OVERRIDE_THIS_COLOR}},recenter:function(){},onPreventFormScroll:function(){}});var fi=di,mi=function(e){return w.a.createElement(Ir,B()({},e,{maxLength:e.validations.maxLength}))};mi.defaultProps={validations:{maxLength:null}},mi.propTypes={validations:E.a.shape({maxLength:E.a.number})};var bi=mi,vi=new RegExp(/(https?|ftp|app):\/\//),gi=function(e){return w.a.createElement(Ir,B()({},e,{onCommitAnswer:function(){var t=Array.isArray(e.value)?e.value[0]:e.value;t&&!vi.test(t)&&e.onStageAnswer(e.blockRef,"".concat("https://").concat(t)),e.onCommitAnswer(e.blockRef)},inputType:"url"}))},yi=n(596),ki=n.n(yi),Ci=n(109),wi=n(108),Si=n(133);function xi(){var e=k()(["\n  font-weight: bold;\n"]);return xi=function(){return e},e}var Ei=function(e,t){var n=yi.textSizes[t],o="sm"===t?-1:0,r={color:"".concat(e),lineHeight:"".concat(n.lineHeight,"px"),letterSpacing:"".concat(o,"px"),fontSize:"".concat(n.fontSize,"px"),fontWeight:"".concat(je.fontWeights.regular),fontFamily:"".concat(je.fontMonospace),fontSmoothing:"antialiased"};return{base:A()({},r,{"::placeholder":A()({},r,{color:"".concat(Object(X.xxtransparent)(e))})})}},Oi=S.default.span(xi());Oi.displayName="PriceTag";var Ri=function(e){function t(e){var n;return a()(this,t),(n=u()(this,p()(t).call(this,e))).stripeElement=null,n.cardName=null,n.cardNumber=null,n.state={cardError:null,isCardNumberFocused:!1,isCardNameFocused:!1},n.handleCommit=n.handleCommit.bind(f()(n)),n.handleCardNumberChange=n.handleCardNumberChange.bind(f()(n)),n.handleCardEnter=n.handleCardEnter.bind(f()(n)),n.handleCardNumberFocus=n.handleCardNumberFocus.bind(f()(n)),n.handleCardNumberBlur=n.handleCardNumberBlur.bind(f()(n)),n.handleCardNameKeyDown=n.handleCardNameKeyDown.bind(f()(n)),n.handleCardNameChange=n.handleCardNameChange.bind(f()(n)),n.handleCardNameFocus=n.handleCardNameFocus.bind(f()(n)),n.handleCardNameBlur=n.handleCardNameBlur.bind(f()(n)),n.getAnswerValue=n.getAnswerValue.bind(f()(n)),n.focustimeout=null,n}return b()(t,e),l()(t,[{key:"updateCardFocus",value:function(e){var t=this;Object(X.isTouch)()||!this.props.isFocused||this.state.isCardNameFocused||this.state.isCardNumberFocused||!Q(e,this.props.layoutItemsSize)||(clearTimeout(this.focustimeout),this.focustimeout=setTimeout(function(){t.props.isActive&&t.stripeElement.focus()},100))}},{key:"componentDidMount",value:function(){var e=Kt()(regeneratorRuntime.mark(function e(){var t,n,o,r,i,a,s=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,n=t.theme,o=t.breakpoint,r=t.isActive,i=t.isFocused,a={hidePostalCode:!0,hideIcon:!0,style:Ei(n.colors.secondary,o)},e.prev=2,e.next=5,Object(Ci.a)(a);case 5:this.stripeElement=e.sent,this.stripeElement.on("change",this.handleCardNumberChange),this.stripeElement.on("focus",this.handleCardNumberFocus),this.stripeElement.on("blur",this.handleCardNumberBlur),this.stripeElement.on("ready",function(){!Object(X.isTouch)()&&r&&i&&s.stripeElement.focus()}),this.stripeElement.mount(this.cardNumber),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),console.error(e.t0.message);case 16:this.props.handleAppScroll(function(){s.props.isActive&&s.updateCardFocus(s.cardNumber)});case 17:case"end":return e.stop()}},e,this,[[2,13]])}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.stripeElement&&this.stripeElement.destroy(),this.stage(this.props.blockRef,{cardholdersName:"",isCardValid:!1,isCardEmpty:!0})}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.theme,o=t.breakpoint,r=t.isActive,i=n.colors.secondary,a=e.theme.colors.secondary;this.stripeElement&&(r||(this.state.isCardNameFocused&&this.cardName&&this.cardName.blur(),this.state.isCardNumberFocused&&this.stripeElement.blur()),e.breakpoint===o&&a===i||this.stripeElement.update({style:Ei(i,o)}))}},{key:"preventInputBlur",value:function(){var e=this;this.preventBlur=!0,setTimeout(function(){return e.preventBlur=!1},300),clearTimeout(this.inputBlurTimeout)}},{key:"handleInputBlur",value:function(){var e=this;this.inputBlurTimeout=setTimeout(function(){!e.preventBlur&&e.props.onInputBlur()},100)}},{key:"handleTouchRecentering",value:function(){var e=this;Object(X.isTouch)()&&!Object(wt.a)()&&setTimeout(function(){e.props.recenter(ge,ge)},700)}},{key:"handleCardNumberFocus",value:function(){this.preventInputBlur(),this.props.onInputFocus(),this.setState({isCardNumberFocused:!0}),this.handleTouchRecentering()}},{key:"handleCardNumberBlur",value:function(){this.setState({isCardNumberFocused:!1}),this.handleInputBlur()}},{key:"handleCardNameFocus",value:function(){this.preventInputBlur(),this.props.onInputFocus(),this.setState({isCardNameFocused:!0}),this.handleTouchRecentering()}},{key:"handleCardNameBlur",value:function(){this.setState({isCardNameFocused:!1}),this.handleInputBlur()}},{key:"handleCardNameKeyDown",value:function(e){if(e.keyCode===ke.a.TAB&&e.shiftKey)return this.stripeElement.focus(),void e.stopPropagation();var t=this.getAnswerValue(),n=t.cardholdersName,o=t.isCardValid;e.keyCode===ke.a.ENTER&&o&&n&&(this.handleCommit(),this.cardName&&this.cardName.blur())}},{key:"handleCommit",value:function(){var e=this;setTimeout(function(){e.props.isActive&&e.props.onCommitAnswer(e.props.blockRef)},0)}},{key:"handleCardEnter",value:function(){this.cardName&&this.cardName.focus()}},{key:"getAnswerValue",value:function(){var e=this.props.value;return e&&e.length&&e[0]?e[0]:{}}},{key:"stage",value:function(e,t){if(t&&!t.cardholdersName&&t.isCardEmpty)return this.props.onStageAnswer(e,[]);this.props.onStageAnswer(e,[t])}},{key:"handleCardNameChange",value:function(e){this.stage(this.props.blockRef,A()({},this.getAnswerValue(),{cardholdersName:e.target.value}))}},{key:"handleCardNumberChange",value:function(e){this.setState({cardError:e.error}),this.stage(this.props.blockRef,A()({},this.getAnswerValue(),{isCardValid:e.complete,isCardEmpty:e.empty}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.blockRef,o=t.breakpoint,r=t.buttonText,i=t.isCommitted,a=t.isReviewModeEnabled,s=t.layoutItemsSize,l=t.price,c=t.theme,u=t.stripeErrorCodes,h=t.validations,p=t.t,d=this.state.cardError,f=this.getAnswerValue(),m=f.cardholdersName,b=f.isCardValid,v=void 0!==b&&b,g=f.isCardEmpty,y=void 0===g||g,k=h&&h.required,C=i||a,S=!!m,x=C&&!S&&(!y||k),E=d||C&&(y||!v)&&(S||k),O=u[d&&d.code]||"label.error.required",R=this.props.isCommitButtonVisible&&v&&S;return w.a.createElement(bt,B()({},this.props,{validationError:null,title:{text:this.props.title,for:this.inputId,type:"label"}}),w.a.createElement(M.a,{top:1},w.a.createElement(Xe.a,{type:"description",color:c.colors.primary,htmlTag:"p"},p("block.payment.hintCharge")," ",w.a.createElement(Oi,null,l)),w.a.createElement(Xe.a,{type:"description",color:c.colors.primary,htmlTag:"p"},p("block.payment.hintStore"))),w.a.createElement(M.a,{bottom:2},w.a.createElement(ki.a,{breakpoint:o,color:c.colors.secondary,cardNameRef:function(t){return e.cardName=t},cardName:m||"",cardNameErrorMessage:Object(Z.a)(p("label.error.required")),cardNamePlaceholder:p("block.payment.placeholder.cardName"),onCardNameChange:this.handleCardNameChange,onCardNameKeyDown:this.handleCardNameKeyDown,onCardNameFocus:this.handleCardNameFocus,onCardNameBlur:this.handleCardNameBlur,isCardNameErrorVisible:!!x,cardNumberRef:function(t){return e.cardNumber=t},cardNumberErrorMessage:Object(Z.a)(p(O)),isCardNumberFocused:this.state.isCardNumberFocused,isCardNumberErrorVisible:!!E,onCardNumberEnterPressed:this.handleCardEnter,stripeLinkText:p("block.payment.securedBy")})),w.a.createElement(ae,{hideIcon:!0,blockRef:n,label:r,onClick:this.handleCommit,isVisible:R,layoutItemsSize:s,useStickyFooter:!0}))}}]),t}(C.PureComponent);Ri.propTypes={price:E.a.string,theme:E.a.object,t:E.a.func,value:E.a.array,stripeErrorCodes:E.a.object,layoutItemsSize:E.a.object,handleAppScroll:E.a.func,recenter:E.a.func,onInputFocus:E.a.func,onInputBlur:E.a.func},Ri.defaultProps={breakpoint:"lg",theme:{colors:{primary:X.__OVERRIDE_THIS_COLOR,secondary:X.__OVERRIDE_THIS_COLOR}},handleAppScroll:function(){},onInputFocus:function(){},onInputBlur:function(){},recenter:function(){},t:function(e){return e},value:[{cardholdersName:"",isCardEmpty:!0,isCardValid:!1}],stripeErrorCodes:{}};var Ai,Ii=Object(o.b)(function(e){return{price:Object(wi.b)(e),stripeErrorCodes:Si.b}})(Object(_t.withBreakpoint)(Ri)),Ti=(Ai={},g()(Ai,it.a.date,{component:Object(J.a)(Mt)}),g()(Ai,it.a.dropdown,{component:Object(J.a)(ir)}),g()(Ai,it.a.email,{component:Object(J.a)(Tr)}),g()(Ai,it.a.fileUpload,{component:Object(J.a)(uo)}),g()(Ai,it.a.group,{component:fr}),g()(Ai,it.a.legal,{component:Object(J.a)(Rr)}),g()(Ai,it.a.longText,{component:Object(J.a)(Ot)}),g()(Ai,it.a.multipleChoice,{component:Object(J.a)(No)}),g()(Ai,it.a.number,{component:Object(J.a)(jr)}),g()(Ai,it.a.opinionScale,{component:hr}),g()(Ai,it.a.pictureChoice,{component:Object(J.a)(Vo)}),g()(Ai,it.a.rating,{component:yr}),g()(Ai,it.a.shortText,{component:Object(J.a)(bi)}),g()(Ai,it.a.statement,{component:mr}),g()(Ai,it.a.website,{component:Object(J.a)(gi)}),g()(Ai,it.a.yesNo,{component:Object(J.a)(Er)}),g()(Ai,it.a.payment,{component:Object(J.a)(Ii)}),g()(Ai,it.a.phoneNumber,{component:Object(J.a)(fi)}),Ai),Fi={component:Object(J.a)(Sr)},ji=function(e){var t=e.type,n=j()(e,["type"]),o=Ti.hasOwnProperty(t)?Ti[t]:Fi;return w.a.createElement(o.component,Object.assign({type:t},n,o.props))};ji.propTypes={type:E.a.string};var Di=ji;function Bi(){return function(e){setTimeout(function(){e({type:ie.G,payload:{isInputFocused:!1}})},50)}}function Ni(){return{type:ie.G,payload:{isInputFocused:!0}}}var Pi=n(5),Li=n(87),Hi=n(9),Vi=T()(JSON.stringify,Hi.h),Mi=Object(o.b)(function(e,t){var n=t.blockRef,o=function(e,t){var n=null;return function(o,r){var i=Object(Pi.f)(o,r),a=Object(Hi.b)(o,r),s=Object(Pi.h)(o,i),l=a&&Object(Hi.d)(a);if(n&&!s&&n.isActive===s&&n.isCommitted===l)return n;var c=!Object(Hi.p)(a),u=A()({},i,{blockIndex:Object(Pi.g)(o,r),isFirstBlock:0===Object(Pi.g)(o,r),title:e(o),description:t(o),formId:Object(mt.d)(o),isAnswered:c,isActive:s,isCommitted:l,isFocused:s&&Object(Pi.a)(o),canUpdateFocus:Object(Pi.a)(o),isReviewModeEnabled:Object(mt.n)(o),isValid:a&&Object(Hi.e)(a),isVisible:Object(Pi.y)(o,i),validationError:Object(Hi.g)(o,i),isCommitButtonVisible:Object(Pi.z)(o,r),isLivePreview:Object(mt.k)(o),language:Object(mt.r)(o),shouldClearInput:!c&&Object(mt.k)(o),value:c?Vi(a):void 0,theme:Object(K.f)(o),ref:void 0});return n=u,u}}(Object(Li.b)(n),Object(Li.a)(n));return function(e){return o(e,n)}},function(e){return A()({},Object(r.b)({onCommitAnswer:z.d,onStageAnswer:z.u,onPreventFormScroll:z.n,scrollTo:z.g,recenter:z.o,scrollToChoice:z.s,onInputFocus:Ni,onInputBlur:Bi},e),{handleAppScroll:re(e,ie.d)})})(Di);function zi(){var e=k()(["\n  padding-top: ","px;\n  padding-bottom: ","px;\n"]);return zi=function(){return e},e}var Ki=S.default.div(zi(),function(e){return e.top},function(e){return e.bottom});Ki.displayName="Separator";var _i=function(e){function t(){return a()(this,t),u()(this,p()(t).apply(this,arguments))}return b()(t,e),l()(t,[{key:"render",value:function(){var e=this.props,t=e.blocks,n=e.layoutItemsSize,o=Object(O.a)(t),r=Object(X.isTouch)()?48:12;return w.a.createElement("main",null,t.map(function(e,i){var a=0===i,s=i===t.length-1,l=t[i-1]&&t[i-1].activateFirstChild,c=e.activateFirstChild;return w.a.createElement(Ki,{key:e.ref,top:a||l?0:r,bottom:s||c?0:r},w.a.createElement(Mi,{listIndexText:o[i],key:e.ref,blockRef:e.ref,layoutItemsSize:n}))}))}}]),t}(C.PureComponent);_i.defaultProps={blocks:[]},_i.propTypes={blocks:E.a.array.isRequired,layoutItemsSize:E.a.object};var Ui=_i,Wi=n(22),Yi=Object(o.b)(function(e){return{blocks:Wi.b(e)}})(Ui);function Gi(){var e=k()(["\n  color: ",";\n  cursor: ",";\n  margin-left: 5px;\n  opacity: ",";\n  text-decoration: underline;\n"]);return Gi=function(){return e},e}var qi=S.default.a(Gi(),function(e){return e.color},function(e){return e.disabled?"default":"pointer"},function(e){return e.disabled?.3:1}),Xi=function(e){var t=e.color,n=e.isEnabled,o=e.onClick,r=e.timeout,i=e.t;return 0===r?w.a.createElement("div",null,i("label.retryLink.retrying")):w.a.createElement("div",null,i("label.retryLink.counter",{timeout:r}),w.a.createElement(qi,{color:t,disabled:!n,title:i("label.retryLink.title"),onClick:o},i("label.retryLink.title")))};Xi.propTypes={color:E.a.string,isEnabled:E.a.bool,onClick:E.a.func,timeout:E.a.number,t:E.a.func},Xi.defaultProps={t:function(e){return e}};var Qi=Object(J.a)(Xi),Zi=function(e){var t=e.isLivePreview,n=e.isReviewModeEnabled,o=e.isPaymentBlockAnswered,r=e.price,i=e.isComplete,a=e.isSubmitting,s=e.theme,l=e.fullWidth,c=e.centered,u=e.onClick,h=e.t,p=h("label.button.submit");n?p=h("label.button.review"):o&&(p=h("label.button.submitAndPay",{price:r}));var d=n?"rgba(153, 0, 0, 0.6)":s.colors.button,f=Object(be.a)()||c?"":Object(Z.a)(h("label.buttonHint.default"));return w.a.createElement(Y.a,{size:"large",content:p,color:d,contextBackgroundColor:s.colors.background,helperText:f,helperColor:s.colors.primary,dataQa:n?"review-mode-button deep-purple-review-mode-button":"submit-button deep-purple-submit-button",onClick:u,centered:c,fullWidth:l,isTransparent:s.hasTransparentButton&&!n,isSpinning:!t&&a,disabled:!t&&(a||i)})};Zi.defaultProps={centered:!1,theme:{colors:{},hasTransparentButton:!1},t:function(e){return e}},Zi.propTypes={isLivePreview:E.a.bool,isReviewModeEnabled:E.a.bool,isPaymentBlockAnswered:E.a.bool,isComplete:E.a.bool,isSubmitting:E.a.bool,centered:E.a.bool,price:E.a.string,theme:E.a.object,onClick:E.a.func,fullWidth:E.a.bool,t:E.a.func};var Ji=Object(J.a)(Zi),$i=function(e){var t=e.color,n=e.t,o=e.messageKey,r=e.actionLink;return w.a.createElement(H.a,{size:"sizeN1",color:t,useDefaultFont:!0},o&&Object(Z.a)(n(o)),r)};$i.propTypes={t:E.a.func,color:E.a.string,messageKey:E.a.string,actionLink:E.a.node},$i.defaultProps={t:function(e){return e}};var ea=Object(J.a)($i);function ta(){var e=k()(["\n  padding: 12px 0;\n  background-color: rgba(153, 0, 0, 0.6);\n  border: 1px solid rgba(0, 0, 0, 0.15);\n"]);return ta=function(){return e},e}function na(){var e=k()(["\n  padding-top: 30px;\n  height: 100%;\n  width: 100%;\n  border-top: 1px solid\n    ",";\n  transition: transform 150ms cubic-bezier(0, 0.51, 0.1, 1.01);\n  transform: translateY(",");\n"]);return na=function(){return e},e}function oa(){var e=k()(["\n  overflow: hidden;\n  outline: 0;\n\n  /*\n   * The reasoning behind this height:\n   * The goal of this height is to allow the unfixed footer to be activated by the scroller.\n   * The focus line is (at the writing of this comment) at half of the blockList height,\n   * that's where the 50% comes from.\n   * The scroller activates the unfixed footer if the focus line is at least\n   * 'UNFIXED_FOOTER_MARGIN'px passed the end of the form (the end of the last block).\n   * If the height was 50%, the focus line would only reach exactly to the end of the form.\n   * We need at least one margin (50% + 'UNFIXED_FOOTER_MARGIN'px) to activate it, but we add two margins\n   * to make this more reliable.\n   *\n   * Decreasing this height can make the unfixed footer unreachable\n   */\n  height: calc(50% + ","px);\n"]);return oa=function(){return e},e}var ra=S.default.section(oa(),60),ia=S.default.div(na(),function(e){return Object(X.footerBorderColor)(e.contextBackgroundColor)},function(e){return e.active?0:"100%"}),aa=S.default.div(ta()),sa=function(e){var t=e.visible,n=e.timeout,o=e.color,r=e.onRetryClick;return t?w.a.createElement(M.a,{top:2},w.a.createElement(ea,{messageKey:"label.warning.slowSubmission",color:o,actionLink:w.a.createElement(Qi,{color:o,isEnabled:0!==n,onClick:r,timeout:n})})):null},la=function(e){var t=e.visible,n=e.centered,o=e.color,r=e.warningText,i=e.actionText;return t&&w.a.createElement(qn.a,{position:n?"center":"left"},w.a.createElement(M.a,{top:2},w.a.createElement(H.a,{color:o,size:"sizeN1",useDefaultFont:!0,dimmed:!0},r," - ",w.a.createElement("a",{href:"https://www.typeform.com/help/report-abuse",target:"_blank",rel:"noopener noreferrer"},i))))},ca=function(e){function t(e){var n;return a()(this,t),(n=u()(this,p()(t).call(this,e))).handleBlockKeyboardEvent=n.handleBlockKeyboardEvent.bind(f()(n)),n.handleSubmitAction=n.handleSubmitAction.bind(f()(n)),n.handleRetryClick=n.handleRetryClick.bind(f()(n)),n}return b()(t,e),l()(t,[{key:"handleSubmitAction",value:function(){this.props.submitForm(),this.props.isReviewModeEnabled&&this.props.invalidAnswersAmount&&this.props.reviewForm()}},{key:"handleBlockKeyboardEvent",value:function(e){e.keyCode===ke.a.ENTER&&this.handleSubmitAction()}},{key:"componentDidUpdate",value:function(){this.props.isFocused&&this.unfixedFooterRef&&this.unfixedFooterRef.focus()}},{key:"handleRetryClick",value:function(){this.props.resetRetryCount(),this.props.submitForm()}},{key:"render",value:function(){var e=this,t=this.props,n=t.isActive,o=t.showPhishingMessage,r=t.errorMessageId,i=t.isButtonFullWidth,a=t.isLivePreview,s=t.isReviewModeEnabled,l=t.isPaymentBlockAnswered,c=t.invalidAnswersAmount,u=t.submit,h=t.price,p=t.theme,d=t.t;return w.a.createElement(ra,{tabIndex:"-1","data-qa":"unfixed-footer",onKeyDown:this.handleBlockKeyboardEvent,id:ye.b,innerRef:function(t){return e.unfixedFooterRef=t}},n&&r&&w.a.createElement(aa,null,w.a.createElement(Fe.a,null,w.a.createElement(H.a,{size:"sizeN1",color:"#fff",fontWeight:"regular",useDefaultFont:!0},d(r,{answerAmount:c})))),w.a.createElement(ia,{contextBackgroundColor:p.colors.background,active:n,"data-qa":n?"unfixed-footer--active":""},w.a.createElement(Fe.a,null,w.a.createElement(U.a,{isVisible:!u.isComplete,type:"fade",duration:200},w.a.createElement(qn.a,{position:i?"center":"left"},w.a.createElement(Ji,{isLivePreview:a,isReviewModeEnabled:s&&c>0,isPaymentBlockAnswered:l,isSubmitting:u.isSubmitting,isComplete:u.isComplete,fullWidth:i,centered:i,onClick:this.handleSubmitAction,price:h,theme:p}))),w.a.createElement(la,{color:p.colors.primary,warningText:d("label.warning.phishing"),actionText:d("label.action.phishing"),visible:o,centered:i}),w.a.createElement(sa,{timeout:u.retry.timeout,visible:u.retry.showMessage,color:p.colors.primary,onRetryClick:this.handleRetryClick}))))}}]),t}(C.PureComponent);ca.propTypes={invalidAnswersAmount:E.a.number,isActive:E.a.bool,errorMessageId:E.a.string,showPhishingMessage:E.a.bool,isLivePreview:E.a.bool,isReviewModeEnabled:E.a.bool,submitForm:E.a.func,reviewForm:E.a.func,isFocused:E.a.bool,submit:E.a.object,resetRetryCount:E.a.func,isPaymentBlockAnswered:E.a.bool,price:E.a.string,t:E.a.func,theme:E.a.object,size:E.a.object},ca.defaultProps={showPhishingMessage:!0,errorMessageId:null,submit:{retry:{},isComplete:!1,isSubmitting:!1},submitForm:St.a,size:{width:800},theme:{colors:{primary:X.__OVERRIDE_THIS_COLOR,background:X.__OVERRIDE_THIS_COLOR}},t:function(e){return e}};var ua=Object(J.a)(function(e){return w.a.createElement(_t.ResponsiveConsumer,null,function(t){var n=t.width<je.screenSizes.md&&!e.isLivePreview;return w.a.createElement(ca,B()({isButtonFullWidth:n},e))})}),ha=n(191),pa=n(40),da=n(12),fa=Object(o.b)(function(e){var t=Object(Hi.o)(e),n=Object(mt.n)(e),o=Object(pa.h)(e);return t&&(o=1===t?"label.error.incompleteAnswer":"label.error.incompleteAnswers"),{submit:Object(pa.g)(e),showPhishingMessage:Object(da.d)(e),isActive:Object(ha.a)(e),isFocused:Object(ha.b)(e),isLivePreview:Object(mt.k)(e),isPaymentBlockAnswered:Object(Hi.s)(e),isReviewModeEnabled:n,invalidAnswersAmount:t,errorMessageId:o,theme:Object(K.f)(e),price:Object(wi.b)(e)}},function(e){return Object(r.b)({reviewForm:z.h,submitForm:z.v,resetRetryCount:z.r},e)})(ua),ma=Object(o.b)(function(e){return{scrolling:Object(mt.x)(e),preventFormScroll:Object(mt.t)(e),blocks:Wi.b(e),currentRef:Object(mt.b)(e),isInputFocused:Object(mt.j)(e)}},function(e){return Object(r.b)({onActivate:z.a,onScroll:z.b,onEndAutoScroll:z.f,onGoToNextBlock:z.i,onGoToPreviousBlock:z.j},e)})(Ie),ba=n(275),va=n.n(ba);var ga=n(67),ya=n(588),ka=n.n(ya);function Ca(){var e=k()(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  z-index: ",";\n  ",";\n"]);return Ca=function(){return e},e}var wa=function(e){return e&&e.title&&Object(Z.a)(e.title)},Sa=function(e){return e?e.childOfGroup&&e.listIndexText?null:e.titleCounterIcon||"arrow":null},xa=S.default.div(Ca(),je.zLevels.level3,function(e){return e.isVisible?"":"pointer-events: none;"}),Ea=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return function(t){function o(e){var t;return a()(this,o),(t=u()(this,p()(o).call(this,e))).state=e,t.shouldRender=!1,t.updateState=va.a.apply(void 0,[t.updateState].concat(n)),t}return b()(o,t),l()(o,[{key:"componentWillReceiveProps",value:function(e){this.shouldRender=!1,this.updateState(e)}},{key:"componentWillUnmount",value:function(){this.updateState.cancel()}},{key:"updateState",value:function(e){this.shouldRender=!0,this.setState(e)}},{key:"shouldComponentUpdate",value:function(){return this.shouldRender}},{key:"render",value:function(){return w.a.createElement(e,this.state)}}]),o}(C.Component)}(ka.a,150,{}),Oa=function(e){return w.a.createElement(xa,{isVisible:e.groupHeaderVisible||e.questionHeaderVisible},w.a.createElement(Ea,e))};Oa.propTypes={groupHeaderVisible:E.a.bool,questionHeaderVisible:E.a.bool};var Ra=Object(_t.withBreakpoint)(Object(o.b)(function(e,t){var n=Object(ga.a)(e),o=Object(mt.j)(e),r=Object(X.isTouch)()&&o,i=!n&&Object(mt.h)(e)&&"sm"!==t.breakpoint&&!r,a=!n&&Object(mt.i)(e)&&!r,s=i?Object(mt.A)(e):null,l=a?Object(mt.B)(e):null,c=Sa(l),u=Sa(s);return{groupHeaderVisible:a,groupHeaderContent:wa(l),groupHeaderIcon:c,groupHeaderCounter:l&&l.listIndexText,groupHeaderImage:function(e){return e&&e.attachment&&"image"===e.attachment.type&&e.attachment.resource&&e.attachment.resource.src}(l),questionHeaderVisible:i,questionHeaderContent:wa(s),questionHeaderIcon:u,questionHeaderCounter:s&&s.listIndexText,contextBackgroundColor:Object(K.a)(e),contentColor:Object(K.d)(e),counterColor:Object(K.e)(e),oldLayout:!0}})(Oa)),Aa=n(98),Ia=n(586),Ta=n.n(Ia),Fa=n(584),ja=n.n(Fa),Da=n(190),Ba=T()(Ta.a)(function(e){return function(){window.open(e,"_blank")}}),Na=Object(ce.a)(Object(o.b)(function(e,t){var n=Object(ga.e)(e),o=Object(da.a)(e)(window.location.hostname,"typeform-footer"),r=Object(Hi.j)(e),i=Object(Hi.i)(e);return{buttonsColor:Object(K.b)(e),progressColor:Object(K.e)(e),progressBackgroundColor:Object(K.a)(e),contextBackgroundColor:Object(K.a)(e),transparentButtons:Object(K.g)(e),progressTotalAmount:Object(Hi.i)(e),progressCompletedAmount:Object(Hi.j)(e),progressType:Object(mt.u)(e),withProgress:!n&&!Object(mt.m)(e),withNavigationArrows:!n,withBackground:!n,nextButtonDisabled:!Object(Da.a)(e),previousButtonDisabled:!Object(Da.b)(e),withBranding:Object(mt.y)(e),answeredText:t.t("label.progress.proportion",{step:r,total:i}),percentageText:t.t("label.progress.percent",{percent:Math.round(100*r/i)}),brandButtonText:t.t("label.branding.poweredby"),onBrandButtonClick:Ba(o),dataQa:"fixed-footer",visible:!Object(be.a)()||!Object(mt.j)(e)}},function(e){return{nextButtonOnClick:function(){return e(z.i())},previousButtonOnClick:function(){return e(z.j())}}})(ja.a)),Pa=n(274),La=n.n(Pa),Ha=n(271),Va=n.n(Ha);function Ma(){var e=k()(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  border-top: 1px solid;\n  height: ","px;\n  background-color: ",";\n  border-color: ",";\n"]);return Ma=function(){return e},e}function za(){var e=k()(["\n  position: absolute;\n  width: 100%;\n  overflow: hidden;\n  height: ","px;\n  bottom: ","px;\n  z-index: ",";\n  opacity: ",";\n"]);return za=function(){return e},e}function Ka(){var e=k()(["\n  display: flex;\n  align-items: center;\n"]);return Ka=function(){return e},e}var _a=S.default.div(Ka()),Ua=S.default.div(za(),je.footerHeight,je.footerHeight,function(e){return e.isActive?je.zLevels.level3:je.zLevels.level0},function(e){return e.isActive?"1":"0"}),Wa=S.default.div(Ma(),function(e){return e.height},function(e){return Object(X.transparent)(Object(X.mix)(e.contextBackgroundColor,e.color,.2))},function(e){return Object(X.mix)(e.contextBackgroundColor,e.color,.3)}),Ya=function(e){function t(e){var n;return a()(this,t),(n=u()(this,p()(t).call(this,e))).handleCommit=n.handleCommit.bind(f()(n)),n}return b()(t,e),l()(t,[{key:"handleCommit",value:function(){this.props.onCommitAnswer(this.props.blockRef)}},{key:"shouldComponentUpdate",value:function(e){return this.props.show!==e.show}},{key:"render",value:function(){var e=this.props,t=e.show,n=e.theme,o=e.t,r=e.breakpoint,i=e.buttonText,a=e.showButtonIcon,s="sm"===r,l=s||Object(be.a)()?"":Object(Z.a)(o("label.buttonHint.default"));return w.a.createElement(Ua,{isActive:t},w.a.createElement(U.a,{type:"slideUp",isVisible:t},w.a.createElement(Wa,{height:je.footerHeight,contextBackgroundColor:n.colors.background,color:n.colors.secondary},w.a.createElement(Fe.a,null,w.a.createElement(_a,null,w.a.createElement(Va.a,{fullWidth:s,onClick:this.handleCommit,iconSvg:a?q.a:null,size:"medium",color:n.colors.button,contextBackgroundColor:n.colors.background,transparent:n.hasTransparentButton,dataQa:"sticky-footer-button"},o(i)),l&&w.a.createElement(M.a,{left:2},w.a.createElement(La.a,{text:l,color:n.colors.secondary})))))))}}]),t}(C.Component);Ya.defaultProps={t:function(e){return e},buttonText:"label.button.ok",showButtonIcon:!0,theme:{colors:{background:X.__OVERRIDE_THIS_COLOR,button:X.__OVERRIDE_THIS_COLOR,secondary:X.__OVERRIDE_THIS_COLOR}}},Ya.propTypes={show:E.a.bool,theme:E.a.object,blockRef:E.a.string,breakpoint:E.a.string,buttonText:E.a.string,showButtonIcon:E.a.bool,onCommitAnswer:E.a.func,isFooterVisible:E.a.bool,t:E.a.func};var Ga=Object(_t.withBreakpoint)(Object(J.a)(Ya)),qa=Object(o.b)(function(e){var t=Object(mt.w)(e),n=Object(Pi.f)(e,t);if(!n)return{show:!1,theme:Object(K.f)(e)};var o=Object(be.a)()&&Object(mt.j)(e);return{blockRef:t,show:!Object(ga.e)(e)&&!o&&!Object(mt.o)(e),theme:Object(K.f)(e),buttonText:n.buttonText,showButtonIcon:!Object(Pi.v)(n)}},function(e){return Object(r.b)({onCommitAnswer:z.d},e)})(Ga),Xa=n(581),Qa=n.n(Xa);function Za(){var e=k()(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  z-index: ",";\n  ","\n"]);return Za=function(){return e},e}var Ja=S.default.div(Za(),je.zLevels.level4,function(e){return e.isVisible?"":"pointer-events: none;"}),$a=function(e){var t=e.isVisible,n=e.onRemove,o=e.t;return w.a.createElement(Ja,{isVisible:t},w.a.createElement(Qa.a,{isVisible:t,onRemove:n,content:o("label.warning.trialPrivate")}))};$a.propTypes={isVisible:E.a.bool,onRemove:E.a.func,t:E.a.func};var es=Object(J.a)($a),ts=function(e){function t(e){var n;return a()(this,t),(n=u()(this,p()(t).call(this,e))).handleOnUnload=n.handleOnUnload.bind(f()(n)),n}return b()(t,e),l()(t,[{key:"componentDidMount",value:function(){er.b.addEventListener("beforeunload",this.handleOnUnload,!0)}},{key:"componentWillUnmount",value:function(){er.b.removeEventListener("beforeunload",this.handleOnUnload,!0)}},{key:"handleOnUnload",value:function(e){if(this.props.enabled)return e.preventDefault(),e.returnValue="",""}},{key:"render",value:function(){return null}}]),t}(C.Component);function ns(){var e=k()(["\n  position: absolute;\n  opacity: inherit;\n  right: 0;\n  left: 0;\n  bottom: 0;\n\n  @media print {\n    display: none;\n  }\n"]);return ns=function(){return e},e}function os(){var e=k()(["\n  height: ",";\n  transform: none;\n  ",";\n"]);return os=function(){return e},e}function rs(){var e=k()(["\n  height: 100%;\n  overflow: hidden;\n"]);return rs=function(){return e},e}function is(){var e=k()(["\n  0% {\n    height: 100%;\n  }\n\n  55% {\n    height: 100%;\n  }\n\n  100% {\n    height: 0;\n  }\n"]);return is=function(){return e},e}var as=Object(S.keyframes)(is()),ss=S.default.div(rs()),ls=S.default.div(os(),function(e){return e.isVisible?"0":"100%"},function(e){return e.isVisible&&e.animate?"animation: ".concat(as," ").concat(Vr?0:500,"ms ease"):""}),cs=S.default.div(ns()),us=function(e){function t(){var e,n;a()(this,t);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return n=u()(this,(e=p()(t)).call.apply(e,[this].concat(r))),g()(f()(n),"state",{privateMessageVisible:n.props.isPrivateForm}),g()(f()(n),"handleRemove",function(){n.setState({privateMessageVisible:!1})}),n}return b()(t,e),l()(t,[{key:"componentDidUpdate",value:function(e){var t=this;this.props.showBlockList!==e.showBlockList&&setTimeout(function(){t.props.appScroll()},600)}},{key:"render",value:function(){var e=this.props,t=e.isLivePreview,n=e.isPrivateForm,o=e.submit,r=void 0===o?{}:o,i=e.showBlockList,a=e.layoutItemsSize,s=e.hasBlocksWithAnswer,l=!t&&!Object(Aa.a)()&&Hr.a.production&&!(r.isComplete&&r.isSuccess)&&s;return w.a.createElement(ss,null,!t&&n&&w.a.createElement(es,{isVisible:this.state.privateMessageVisible,onRemove:this.handleRemove}),w.a.createElement(Ra,null),w.a.createElement(ls,{isVisible:i,animate:!t}),w.a.createElement(ma,{layoutItemsSize:a},w.a.createElement(Yi,{layoutItemsSize:a}),w.a.createElement(fa,{footerHeight:a.footerHeight})),w.a.createElement(qa,null),w.a.createElement(U.a,{isVisible:i,type:"fade",duration:500,delay:300},w.a.createElement(cs,null,w.a.createElement(Na,null))),w.a.createElement(ts,{enabled:l}))}}]),t}(C.Component);us.defaultProps={submit:{},layoutItemsSize:{}},us.propTypes={appScroll:E.a.func,isLivePreview:E.a.bool,showBlockList:E.a.bool,hasBlocksWithAnswer:E.a.bool,submit:E.a.object,theme:E.a.object,isPrivateForm:E.a.bool,layoutItemsSize:E.a.object};var hs=us,ps=n(16);n.d(t,"mapStateToProps",function(){return ds});var ds=function(e){return{isLivePreview:Object(mt.k)(e),submit:Object(pa.g)(e),theme:e.form.theme,showBlockList:!Object(ps.b)(e)&&!Object(ps.a)(e),isPrivateForm:Object(mt.l)(e),isFooterVisible:!Object(be.a)()||!Object(mt.j)(e),hasBlocksWithAnswer:Object(Hi.n)(e)}};t.default=Object(o.b)(ds,function(e){return Object(r.b)({appScroll:z.b},e)})(hs)}}]);